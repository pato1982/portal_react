/* ==================== VARIABLES ==================== */
:root {
    --primary-color: #1e3a5f;
    --primary-dark: #0d1f33;
    --primary-light: #2d4a6f;
    --secondary-color: #374151;
    --accent-color: #1e3a5f;
    --success-color: #166534;
    --danger-color: #991b1b;
    --warning-color: #92400e;
    --background-color: #f8f9fa;
    --surface-color: #ffffff;
    --border-color: #d1d5db;
    --text-primary: #111827;
    --text-secondary: #374151;
    --text-muted: #6b7280;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.03);
    --shadow-md: 0 2px 4px -1px rgba(0, 0, 0, 0.06), 0 1px 2px -1px rgba(0, 0, 0, 0.03);
    --shadow-lg: 0 4px 6px -2px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
    --radius-sm: 2px;
    --radius-md: 4px;
    --radius-lg: 6px;
    --transition: all 0.15s ease;
}

/* ==================== RESET & BASE ==================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
    background-color: var(--background-color);
    color: var(--text-primary);
    line-height: 1.5;
    min-height: 100vh;
    font-size: 14px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.app-container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* ==================== HEADER ==================== */
.main-header {
    background: #0d1f33;
    color: white;
    padding: 0 32px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.header-content {
    max-width: 1280px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 60px;
}

.brand {
    display: flex;
    align-items: center;
    gap: 14px;
}

.logo {
    width: 38px;
    height: 38px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.logo-icon {
    font-size: 18px;
    font-weight: 700;
    color: white;
    letter-spacing: -0.5px;
}

.brand-text {
    display: none;
}

.user-info {
    display: none;
}

/* Titulo Administrador y establecimiento en header */
.brand-mobile {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    text-align: center;
}

.brand-mobile .rol-titulo {
    font-size: 16px;
    font-weight: 600;
    color: white;
    line-height: 1.2;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.brand-mobile .establecimiento-nombre {
    font-size: 11px;
    color: rgba(255, 255, 255, 0.7);
    line-height: 1.2;
}

/* Creditos en footer */
.footer-creditos {
    display: block;
    margin-top: 8px;
    font-size: 10px;
    color: rgba(255, 255, 255, 0.7);
}

.ch-naranja {
    color: #f97316;
    font-weight: 600;
}

.header-info {
    display: flex;
    align-items: center;
    gap: 20px;
}

.user-info {
    font-size: 13px;
    font-weight: 400;
    opacity: 0.9;
    letter-spacing: 0.01em;
}

.current-date {
    font-size: 12px;
    opacity: 0.7;
    font-weight: 400;
}

.btn-logout {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 8px;
    width: 36px;
    height: 36px;
    background: transparent;
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--radius-sm);
    font-size: 13px;
    cursor: pointer;
    transition: var(--transition);
}

.btn-logout:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.5);
}

/* ==================== MAIN CONTENT ==================== */
.main-content {
    flex: 1;
    max-width: 1280px;
    width: 100%;
    margin: 0 auto;
    padding: 28px 32px;
}

/* ==================== CONTROL PANEL ==================== */
.control-panel {
    background: var(--surface-color);
    border-radius: 0;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    overflow: hidden;
}

.panel-header {
    background: #0d1f33;
    color: white;
    padding: 14px 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid #1e3a5f;
}

.panel-header h2 {
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

/* ==================== PANTALLA DE LOGIN/SELECCION DE ROL ==================== */
.login-container {
    min-height: 100vh;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.login-card {
    background: white;
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    width: 100%;
    max-width: 1100px;
    overflow: hidden;
}

.login-header {
    text-align: center;
    padding: 40px 80px 30px;
    background: #f8fafc;
    border-bottom: 1px solid #e2e8f0;
}

.login-logo {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #1e3a5f 0%, #0d1f33 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 12px;
    box-shadow: 0 4px 15px rgba(30, 58, 95, 0.3);
}

.login-logo span {
    font-size: 28px;
    font-weight: 700;
    color: white;
}

.login-header h1 {
    font-size: 24px;
    font-weight: 600;
    color: #1e293b;
    margin: 0 0 4px 0;
}

.login-header p {
    font-size: 14px;
    color: #64748b;
    margin: 0;
}

.login-options {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.login-option {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 12px;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    background: white;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
}

.login-option:hover {
    border-color: #1e3a5f;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.login-option.admin:hover {
    border-color: #1e3a5f;
    background: #f0f4f8;
}

.login-option.docente:hover {
    border-color: #f97316;
    background: #fff7ed;
}

.login-option-icon {
    width: 42px;
    height: 42px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.login-option-icon svg {
    width: 22px;
    height: 22px;
}

.login-option.admin .login-option-icon {
    background: linear-gradient(135deg, #1e3a5f 0%, #0d1f33 100%);
    color: white;
}

.login-option.docente .login-option-icon {
    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    color: white;
}

.login-option.apoderado:hover {
    border-color: #10b981;
    background: #f0fdf4;
}

.login-option.apoderado .login-option-icon {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
}

.login-option-text h3 {
    font-size: 14px;
    font-weight: 600;
    color: #1e293b;
    margin: 0 0 2px 0;
}

.login-option-text p {
    font-size: 11px;
    color: #64748b;
    margin: 0;
}

.login-footer {
    text-align: center;
    padding: 20px 80px 24px;
    background: #f8fafc;
    border-top: 1px solid #e2e8f0;
}

.login-footer p {
    font-size: 11px;
    color: #94a3b8;
    margin: 0;
}

/* Boton cerrar sesion en header */
.btn-cerrar-sesion {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-cerrar-sesion:hover {
    background: rgba(255, 255, 255, 0.2);
}

.btn-cerrar-sesion svg {
    width: 14px;
    height: 14px;
}

.menu-toggle {
    display: none;
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    padding: 8px;
    border-radius: var(--radius-sm);
    transition: var(--transition);
}

/* ==================== TABS ==================== */
.tabs-container {
    display: flex;
    flex-direction: column;
}

.tabs-nav {
    display: flex;
    background: #f3f4f6;
    border-bottom: 1px solid var(--border-color);
}

.tab-btn {
    flex: 1;
    padding: 12px 16px;
    font-size: 13px;
    font-weight: 500;
    font-family: inherit;
    color: var(--text-secondary);
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    transition: var(--transition);
    position: relative;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.tab-btn:hover {
    background: rgba(13, 31, 51, 0.04);
    color: var(--primary-color);
}

.tab-btn.active {
    color: var(--primary-color);
    background: var(--surface-color);
    border-bottom-color: #0d1f33;
    font-weight: 600;
}

/* ==================== TAB CONTENT ==================== */
.tabs-content {
    padding: 24px;
    min-height: 400px;
}

.tab-panel {
    display: block;
}

/* ==================== SUB-TABS MOBILE ==================== */
.sub-tabs-mobile {
    display: none;
    margin-bottom: 16px;
}

.sub-tab-btn {
    flex: 1;
    padding: 10px 16px;
    font-size: 13px;
    font-weight: 500;
    font-family: inherit;
    color: var(--text-secondary);
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    cursor: pointer;
    transition: var(--transition);
}

.sub-tab-btn.active {
    background: var(--primary-color);
    color: white;
    font-weight: 600;
}

/* ==================== TWO COLUMNS LAYOUT ==================== */
.two-columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    overflow: visible;
}

.column {
    display: flex;
    flex-direction: column;
    overflow: visible;
}

/* ==================== CARDS ==================== */
.card {
    background: var(--surface-color);
    border-radius: 0;
    box-shadow: none;
    border: 1px solid var(--border-color);
    overflow: hidden;
}

/* Permitir que dropdowns salgan de las cards */
.card:has(.custom-select-container),
.card:has(.filtros-alumnos),
.card:has(.filtros-asistencia),
.card:has(.form-alumnos) {
    overflow: visible;
}

.card-body:has(.custom-select-container),
.card-body:has(.filtros-alumnos),
.card-body:has(.filtros-asistencia),
.card-body:has(.form-alumnos) {
    overflow: visible;
}

.card-header {
    background: #f9fafb;
    padding: 12px 20px;
    border-bottom: 1px solid var(--border-color);
}

.card-header h3 {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.card-body {
    padding: 20px;
}

/* ==================== FORM ELEMENTS ==================== */
.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.form-row-tres {
    grid-template-columns: 1fr 1fr 1fr;
}

/* Grid especial para formulario de alumnos */
.form-alumnos-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 16px;
    margin-bottom: 4px;
}

.form-alumnos-grid .form-group {
    margin-bottom: 0;
}

/* Botones de Apoderado */
.apoderado-botones-container {
    margin-top: 20px;
    display: flex;
    gap: 10px;
}

.apoderado-boton {
    flex: 1;
    background-color: #0d1f33;
    padding: 12px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid #1e3a5f;
}

.apoderado-boton-texto {
    margin: 0;
    font-size: 11px;
    font-weight: 500;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.apoderado-boton-texto .texto-mobile {
    display: none;
}

.apoderado-boton-arrow {
    font-size: 10px;
    color: rgba(255, 255, 255, 0.7);
}

.apoderado-checkbox {
    width: 16px;
    height: 16px;
    border: 1px solid rgba(255, 255, 255, 0.5);
    background-color: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
}

.apoderado-checkbox span {
    color: #ffffff;
    font-size: 12px;
    font-weight: bold;
}

/* Textos de tabla responsive */
.th-mobile {
    display: none;
}

/* Filtros Notas por Curso - modo normal */
.filtros-notas-inline {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    gap: 16px;
    align-items: flex-end;
}

.filtros-notas-inline .form-group {
    flex: 1;
    min-width: 0;
    margin-bottom: 0;
}

/* Espacio entre filtros y tabla de notas */
.tabla-notas-curso-container {
    margin-top: 20px;
}

.form-row-cuatro {
    grid-template-columns: 1fr 1fr 1fr 1fr;
}

.form-group {
    margin-bottom: 16px;
}

.form-group label {
    display: block;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.form-control {
    width: 100%;
    padding: 10px 12px;
    font-size: 13px;
    font-family: inherit;
    color: var(--text-primary);
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    transition: var(--transition);
}

.form-control:focus {
    outline: none;
    border-color: #0d1f33;
    box-shadow: 0 0 0 2px rgba(13, 31, 51, 0.1);
}

.form-control::placeholder {
    color: var(--text-muted);
    font-size: 12px;
}

textarea.form-control {
    resize: vertical;
    min-height: 80px;
}

select.form-control {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23374151' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 36px;
}

/* Custom Select Dropdown */
.custom-select-container {
    position: relative;
    width: 100%;
}

.custom-select-trigger {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    background: #ffffff;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    font-size: 13px;
    color: #1f2937;
    cursor: pointer;
    transition: border-color 0.2s;
}

.custom-select-trigger:hover {
    border-color: #9ca3af;
}

.custom-select-trigger span:first-child {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
}

.custom-select-arrow {
    font-size: 10px;
    color: #6b7280;
    margin-left: 8px;
}

.custom-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: #ffffff;
    border: 1px solid #d1d5db;
    border-top: none;
    border-radius: 0 0 4px 4px;
    max-height: 150px;
    overflow-y: auto;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.custom-select-option {
    padding: 10px 12px;
    font-size: 13px;
    color: #1f2937;
    cursor: pointer;
    border-bottom: 1px solid #f3f4f6;
    transition: background-color 0.15s;
}

.custom-select-option:last-child {
    border-bottom: none;
}

.custom-select-option:hover {
    background: #f3f4f6;
}

.custom-select-option.selected {
    background: #e5edff;
    color: #1e40af;
    font-weight: 500;
}

/* Custom Select con scroll limitado */
.custom-select-scroll {
    max-height: 180px;
    overflow-y: auto;
}

.custom-select-scroll::-webkit-scrollbar {
    width: 6px;
}

.custom-select-scroll::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 3px;
}

.custom-select-scroll::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 3px;
}

.custom-select-scroll::-webkit-scrollbar-thumb:hover {
    background: #a1a1a1;
}

/* ==================== BUTTONS ==================== */
.form-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    padding-top: 12px;
    border-top: 1px solid var(--border-color);
    margin-top: 8px;
}

.btn {
    padding: 9px 20px;
    font-size: 12px;
    font-weight: 500;
    font-family: inherit;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: var(--transition);
    border: 1px solid transparent;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.btn-primary {
    background: #0d1f33;
    color: white;
    border-color: #0d1f33;
}

.btn-primary:hover {
    background: #1e3a5f;
    border-color: #1e3a5f;
}

.btn-secondary {
    background: var(--surface-color);
    color: var(--text-secondary);
    border-color: var(--border-color);
}

.btn-secondary:hover {
    background: #f3f4f6;
    color: var(--text-primary);
}

.btn-danger {
    background: #7f1d1d;
    color: white;
    border-color: #7f1d1d;
}

.btn-danger:hover {
    background: #991b1b;
}

.btn-sm {
    padding: 5px 12px;
    font-size: 11px;
}

/* ==================== DATA TABLE ==================== */
.table-responsive {
    overflow-x: auto;
}

.table-scroll {
    max-height: 400px;
    overflow-y: auto;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
}

.data-table thead {
    background: #0d1f33;
    color: white;
    position: sticky;
    top: 0;
}

.data-table th {
    padding: 10px 12px;
    text-align: left;
    font-weight: 500;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.data-table tbody tr {
    border-bottom: 1px solid #e5e7eb;
    transition: var(--transition);
}

.data-table tbody tr:hover {
    background: #f9fafb;
}

.data-table tbody tr:nth-child(even) {
    background: #fafafa;
}

.data-table tbody tr:nth-child(even):hover {
    background: #f3f4f6;
}

.data-table td {
    padding: 10px 12px;
    color: var(--text-primary);
}

.text-center {
    text-align: center;
}

.text-muted {
    color: var(--text-muted);
}

/* ==================== CHECKBOX GROUP ==================== */
.checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.checkbox-4-columnas {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
}

.checkbox-item {
    display: flex;
    align-items: center;
    gap: 6px;
}

.checkbox-item input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
}

.checkbox-item label {
    font-size: 13px;
    color: var(--text-primary);
    cursor: pointer;
    margin-bottom: 0;
}

/* Especialidades con textos compactos */
.especialidades-grid {
    gap: 6px;
}

.especialidades-grid .checkbox-item {
    gap: 4px;
}

.especialidades-grid .checkbox-item input[type="checkbox"] {
    width: 14px;
    height: 14px;
}

.especialidades-grid .checkbox-item label {
    font-size: 11px;
    white-space: nowrap;
}

/* ==================== LABEL CON BOTON ==================== */
.label-con-boton {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.botones-asignatura {
    display: flex;
    gap: 8px;
}

.btn-agregar-asignatura,
.btn-eliminar-asignatura {
    padding: 4px 10px;
    font-size: 12px;
    font-weight: 500;
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: var(--transition);
}

.btn-agregar-asignatura {
    background: var(--success-color);
    color: white;
}

.btn-eliminar-asignatura {
    background: var(--danger-color);
    color: white;
}

/* ==================== MODAL ==================== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(13, 31, 51, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.modal {
    background: white;
    border-radius: 0;
    width: 90%;
    max-width: 520px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    border: 1px solid var(--border-color);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 20px;
    background: #0d1f33;
    color: white;
}

.modal-header h3 {
    font-size: 13px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.modal-close {
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: rgba(255, 255, 255, 0.8);
    line-height: 1;
    transition: var(--transition);
}

.modal-close:hover {
    color: white;
}

.modal-body {
    padding: 24px 20px;
}

.modal-footer {
    padding: 14px 20px;
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    border-top: 1px solid var(--border-color);
    background: #f9fafb;
}

/* ==================== MODAL MENSAJE (POPUP ATRACTIVO) ==================== */
.modal-mensaje-overlay {
    animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: scale(0.9) translateY(-10px);
    }

    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes iconPop {
    0% {
        transform: scale(0);
    }

    50% {
        transform: scale(1.2);
    }

    100% {
        transform: scale(1);
    }
}

.modal-mensaje {
    width: 320px;
    max-width: 90%;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: slideIn 0.3s ease;
    position: relative;
}

.modal-mensaje-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: rgba(0, 0, 0, 0.1);
    border: none;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #64748b;
    transition: all 0.2s;
    z-index: 10;
}

.modal-mensaje-close:hover {
    background: rgba(0, 0, 0, 0.15);
    color: #1e293b;
}

.modal-mensaje-content {
    padding: 30px 24px 20px;
    text-align: center;
    background: white;
}

.modal-mensaje-icon {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 16px;
    animation: iconPop 0.4s ease 0.1s both;
}

.modal-mensaje-icon.success {
    background: linear-gradient(135deg, #dcfce7, #bbf7d0);
    color: #16a34a;
}

.modal-mensaje-icon.error {
    background: linear-gradient(135deg, #fee2e2, #fecaca);
    color: #dc2626;
}

.modal-mensaje-icon.warning {
    background: linear-gradient(135deg, #fef3c7, #fde68a);
    color: #d97706;
}

.modal-mensaje-icon.info {
    background: linear-gradient(135deg, #dbeafe, #bfdbfe);
    color: #2563eb;
}

.modal-mensaje-titulo {
    font-size: 18px;
    font-weight: 700;
    color: #1e293b;
    margin: 0 0 8px;
}

.modal-mensaje-texto {
    font-size: 14px;
    color: #64748b;
    margin: 0;
    line-height: 1.5;
}

.modal-mensaje-footer {
    padding: 16px 24px 24px;
    background: white;
    display: flex;
    justify-content: center;
}

.btn-modal {
    padding: 12px 32px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-modal-success {
    background: linear-gradient(135deg, #16a34a, #15803d);
    color: white;
}

.btn-modal-success:hover {
    background: linear-gradient(135deg, #15803d, #166534);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3);
}

.btn-modal-error {
    background: linear-gradient(135deg, #dc2626, #b91c1c);
    color: white;
}

.btn-modal-error:hover {
    background: linear-gradient(135deg, #b91c1c, #991b1b);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
}

.btn-modal-warning {
    background: linear-gradient(135deg, #d97706, #b45309);
    color: white;
}

.btn-modal-warning:hover {
    background: linear-gradient(135deg, #b45309, #92400e);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(217, 119, 6, 0.3);
}

.btn-modal-info {
    background: linear-gradient(135deg, #2563eb, #1d4ed8);
    color: white;
}

.btn-modal-info:hover {
    background: linear-gradient(135deg, #1d4ed8, #1e40af);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
}

/* ==================== FOOTER ==================== */
.main-footer {
    background: #0d1f33;
    color: rgba(255, 255, 255, 0.8);
    text-align: center;
    padding: 14px 20px;
    font-size: 11px;
    letter-spacing: 0.02em;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

/* ==================== ESTADISTICAS ==================== */
.estadisticas-container {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.stats-filtros-panel {
    background: var(--surface-color);
    padding: 20px;
    border-radius: 0;
    border: 1px solid var(--border-color);
}

.stats-filtros-header h3 {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 4px;
    color: var(--text-primary);
}

.stats-filtros-header p {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 16px;
}

.stats-filtros-grid {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
}

.stats-filtros-row {
    display: flex;
    flex-direction: row;
    gap: 16px;
    align-items: flex-end;
}

.stats-filtro-grupo {
    flex: 1;
    min-width: 200px;
}

.stats-filtro-grupo label {
    display: block;
    font-size: 10px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.stats-filtro-grupo select {
    width: 100%;
    padding: 9px 12px;
    font-size: 13px;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    background: white;
}

/* Custom selects en filtros de estadísticas */
.stats-filtros-panel,
.stats-filtros-grid,
.stats-filtros-row {
    overflow: visible !important;
    position: relative;
}

.stats-filtros-panel {
    z-index: 100;
}

.stats-filtros-row {
    z-index: 100;
}

/* Z-index descendente para que el primer filtro quede sobre los demás */
.stats-filtros-row .stats-filtro-grupo:nth-child(1) {
    z-index: 103;
}

.stats-filtros-row .stats-filtro-grupo:nth-child(2) {
    z-index: 102;
}

.stats-filtros-row .stats-filtro-grupo:nth-child(3) {
    z-index: 101;
}

.stats-filtros-row-segundo {
    z-index: 99;
}

.stats-filtros-row-segundo .stats-filtro-grupo {
    z-index: 99;
}

.stats-filtro-grupo {
    position: relative;
}

.stats-filtro-grupo .custom-select-container {
    position: relative;
}

.stats-filtro-grupo .custom-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 9999;
    max-height: 150px;
    overflow-y: auto;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    background: #fff;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
}

/* Asegurar que el contenido debajo de los filtros quede debajo */
.stats-vista-titulo,
.stats-kpis-row,
.stats-graficos-grid,
.stats-info-adicional {
    position: relative;
    z-index: 1;
}

.stats-titulo-seccion h4 {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* KPIs Executive */
.stats-kpis-executive {
    display: grid;
    grid-template-columns: 1fr 2fr 1fr;
    gap: 16px;
    align-items: stretch;
}

.stats-kpi-main,
.stats-kpi-approval {
    background: #0d1f33;
    border-radius: 0;
    padding: 24px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 180px;
    border: 1px solid #1e3a5f;
}

.kpi-gauge-container,
.approval-ring-container {
    display: flex;
    align-items: center;
    justify-content: center;
}

.kpi-circle-bg {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: transparent;
    gap: 4px;
}

.kpi-circle-blanco {
    border: 3px solid rgba(255, 255, 255, 0.4);
}

.gauge-number,
.approval-percent {
    color: #fff;
    font-size: 32px;
    font-weight: 700;
    line-height: 1;
}

.gauge-label,
.approval-label {
    color: rgba(255, 255, 255, 0.7);
    font-size: 9px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 500;
}

.gauge-footer,
.approval-footer {
    text-align: center;
    padding-top: 10px;
}

.gauge-subtext,
.approval-subtext {
    font-size: 11px;
    color: rgba(255, 255, 255, 0.6);
}

/* KPIs Secondary */
.stats-kpis-secondary {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.stats-kpi-exec-card {
    background: var(--surface-color);
    border-radius: 0;
    padding: 14px 16px;
    border: 1px solid var(--border-color);
}

.kpi-exec-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.kpi-exec-label {
    font-size: 10px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.kpi-exec-badge {
    font-size: 8px;
    padding: 2px 6px;
    border-radius: 2px;
    font-weight: 600;
    letter-spacing: 0.05em;
}

.kpi-success .kpi-exec-badge {
    background: #ecfdf5;
    color: #065f46;
    border: 1px solid #a7f3d0;
}

.kpi-danger .kpi-exec-badge {
    background: #fef2f2;
    color: #991b1b;
    border: 1px solid #fecaca;
}

.kpi-info .kpi-exec-badge {
    background: #eff6ff;
    color: #1e40af;
    border: 1px solid #bfdbfe;
}

.kpi-warning .kpi-exec-badge {
    background: #fffbeb;
    color: #92400e;
    border: 1px solid #fde68a;
}

.kpi-exec-body {
    margin-bottom: 10px;
}

.kpi-exec-value {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    display: block;
}

.kpi-exec-subtext {
    font-size: 11px;
    color: var(--text-muted);
}

.kpi-exec-bar {
    height: 4px;
    background: #e5e7eb;
    border-radius: 0;
    overflow: hidden;
}

.kpi-exec-bar-fill {
    height: 100%;
    border-radius: 0;
}

.kpi-success .kpi-exec-bar-fill {
    background: #166534;
}

.kpi-danger .kpi-exec-bar-fill {
    background: #991b1b;
}

.kpi-info .kpi-exec-bar-fill {
    background: #1e3a5f;
}

.kpi-warning .kpi-exec-bar-fill {
    background: #92400e;
}

/* Graficos */
.stats-graficos-row {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 16px;
}

.stats-graficos-row.row-tendencia {
    grid-template-columns: 1fr 1fr;
}

/* Indicadores de cambio porcentual */
.cambios-porcentuales {
    display: flex;
    justify-content: space-between;
    padding: 8px 30px 0 50px;
    font-size: 9px;
    font-weight: 600;
}

.cambio-item {
    text-align: center;
    min-width: 35px;
}

.cambio-positivo {
    color: #16a34a;
}

.cambio-negativo {
    color: #dc2626;
}

.cambio-neutro {
    color: #6b7280;
}

.stats-grafico-card {
    background: var(--surface-color);
    border-radius: 0;
    border: 1px solid var(--border-color);
    overflow: hidden;
}

.stats-grafico-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: #f9fafb;
    border-bottom: 1px solid var(--border-color);
}

.stats-grafico-header h4 {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
}

.stats-grafico-badge {
    font-size: 9px;
    padding: 2px 8px;
    background: #0d1f33;
    color: white;
    border-radius: 2px;
    font-weight: 500;
    letter-spacing: 0.05em;
}

.stats-kpi-filtro {
    font-size: 10px;
    padding: 4px 8px;
    border: 1px solid var(--border-color);
    border-radius: 3px;
    background: white;
    color: var(--text-secondary);
    cursor: pointer;
    min-width: 120px;
}

.stats-kpi-filtro:focus {
    outline: none;
    border-color: var(--primary-color);
}

.stats-grafico-body {
    padding: 16px;
    height: 240px;
}

.stats-grafico-body-lg {
    height: 280px;
}

/* ==================== PAGINA DOCENTE ==================== */

/* Autocomplete de alumnos */
.docente-autocomplete-container {
    position: relative;
    display: flex;
    align-items: center;
}

.docente-autocomplete-container .form-control {
    padding-right: 36px;
}

.docente-autocomplete-arrow {
    position: absolute;
    right: 8px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    color: #64748b;
    display: flex;
    align-items: center;
    justify-content: center;
}

.docente-autocomplete-arrow:hover {
    color: #334155;
}

.docente-autocomplete-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    max-height: 200px;
    overflow-y: auto;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.docente-autocomplete-item {
    padding: 10px 12px;
    cursor: pointer;
    font-size: 13px;
    border-bottom: 1px solid #f1f5f9;
}

.docente-autocomplete-item:last-child {
    border-bottom: none;
}

.docente-autocomplete-item:hover {
    background: #f8fafc;
}

.docente-autocomplete-item.disabled {
    color: #94a3b8;
    cursor: default;
}

/* Badge de notas */
.docente-nota-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
    text-align: center;
    min-width: 40px;
}

.docente-nota-badge.nota-excelente {
    background: #dcfce7;
    color: #166534;
}

.docente-nota-badge.nota-buena {
    background: #dbeafe;
    color: #1e40af;
}

.docente-nota-badge.nota-suficiente {
    background: #fef3c7;
    color: #92400e;
}

.docente-nota-badge.nota-insuficiente {
    background: #fee2e2;
    color: #991b1b;
}

.docente-nota-badge.nota-pendiente {
    background: #f1f5f9;
    color: #64748b;
}

/* Radio buttons de asistencia */
.asistencia-radio {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

.asistencia-radio input[type="radio"] {
    display: none;
}

.asistencia-circle {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 2px solid #cbd5e1;
    transition: all 0.15s ease;
}

.asistencia-radio input[type="radio"]:checked+.asistencia-circle.presente {
    background: #10b981;
    border-color: #10b981;
}

.asistencia-radio input[type="radio"]:checked+.asistencia-circle.ausente {
    background: #ef4444;
    border-color: #ef4444;
}

.asistencia-radio input[type="radio"]:checked+.asistencia-circle.tardio {
    background: #f59e0b;
    border-color: #f59e0b;
}

.asistencia-radio input[type="radio"]:checked+.asistencia-circle.justificado {
    background: #3b82f6;
    border-color: #3b82f6;
}

.asistencia-circle:hover {
    border-color: #94a3b8;
}

/* Filtros docente */
.docente-filtros-row {
    display: grid;
    grid-template-columns: 1fr 1fr auto;
    gap: 16px;
    align-items: end;
}

.docente-filtros-row .form-group {
    margin-bottom: 0;
}

.docente-filtros-actions {
    display: flex;
    gap: 8px;
    padding-bottom: 1px;
}

/* Filtros asistencia docente */
.docente-asistencia-filtros {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.docente-asistencia-filtros-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    align-items: end;
}

.docente-asistencia-filtros-row .form-group {
    margin-bottom: 0;
}

/* Tabla asistencia docente */
.docente-tabla-asistencia {
    font-size: 13px;
}

/* Acciones asistencia docente */
.docente-asistencia-acciones {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

/* KPIs docente */
.docente-kpis-grid {
    display: grid;
    gap: 12px;
}

.docente-kpi-card {
    display: flex;
    align-items: center;
    background: white;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.docente-kpi-card.kpi-primary {
    border-left: 3px solid #1e3a5f;
}

.docente-kpi-card.kpi-success {
    border-left: 3px solid #10b981;
}

.docente-kpi-card.kpi-danger {
    border-left: 3px solid #ef4444;
}

.docente-kpi-card.kpi-info {
    border-left: 3px solid #3b82f6;
}

.docente-kpi-card.kpi-warning {
    border-left: 3px solid #f59e0b;
}

.docente-kpi-card.kpi-secondary {
    border-left: 3px solid #64748b;
}

.docente-kpi-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    flex-shrink: 0;
}

.docente-kpi-card.kpi-primary .docente-kpi-icon {
    background: rgba(30, 58, 95, 0.1);
    color: #1e3a5f;
}

.docente-kpi-card.kpi-success .docente-kpi-icon {
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
}

.docente-kpi-card.kpi-danger .docente-kpi-icon {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
}

.docente-kpi-card.kpi-info .docente-kpi-icon {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
}

.docente-kpi-card.kpi-warning .docente-kpi-icon {
    background: rgba(245, 158, 11, 0.1);
    color: #f59e0b;
}

.docente-kpi-card.kpi-secondary .docente-kpi-icon {
    background: rgba(100, 116, 139, 0.1);
    color: #64748b;
}

.docente-kpi-data {
    display: flex;
    flex-direction: column;
}

.docente-kpi-value {
    font-weight: 700;
    color: #1e293b;
    line-height: 1.1;
}

.docente-kpi-label {
    color: #64748b;
}

.docente-kpi-label-row {
    display: flex;
    align-items: center;
}

.docente-kpi-trend {
    border-radius: 4px;
    font-weight: 600;
}

.docente-kpi-trend.up {
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
}

.docente-kpi-trend.down {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
}

/* Graficos docente */
.docente-charts-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.docente-chart-card {
    overflow: hidden;
}

.docente-chart-container {
    height: 220px;
    position: relative;
}

.docente-chart-sm {
    height: 220px;
}

/* Tabla trimestres docente */
.docente-tabla-trimestres-container {
    overflow-x: auto;
}

.docente-tabla {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
}

.docente-tabla th,
.docente-tabla td {
    padding: 6px 8px;
    text-align: center;
    border: 1px solid #e2e8f0;
}

.docente-tabla th {
    background: #f8fafc;
    font-weight: 600;
    color: #475569;
}

.docente-tabla .th-trimestre {
    background: #1e3a5f;
    color: white;
}

.docente-tabla .th-alumno,
.docente-tabla .td-alumno {
    text-align: left;
    min-width: 150px;
}

.docente-tabla .th-fixed {
    background: #f1f5f9;
}

/* Tendencia docente */
.docente-tendencia {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    font-weight: 600;
}

.docente-tendencia.mejorando {
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
}

.docente-tendencia.empeorando {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
}

.docente-tendencia.estable {
    background: rgba(100, 116, 139, 0.1);
    color: #64748b;
}

/* ==================== CHAT FLOTANTE ==================== */
.chat-fab {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 52px;
    height: 52px;
    border-radius: 4px;
    background: #0d1f33;
    border: 1px solid #1e3a5f;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s ease;
    z-index: 9998;
}

.chat-fab:hover {
    background: #1e3a5f;
}

.chat-fab svg {
    width: 24px;
    height: 24px;
    color: white;
}

.chat-fab-badge {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #991b1b;
    color: white;
    font-size: 10px;
    font-weight: 600;
    min-width: 18px;
    height: 18px;
    border-radius: 2px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid white;
}

.chat-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: transparent;
    z-index: 9997;
}

.chat-modal {
    position: fixed;
    bottom: 86px;
    right: 24px;
    width: 380px;
    height: 480px;
    background: white;
    border-radius: 0;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    display: none;
    flex-direction: column;
    overflow: hidden;
    z-index: 9999;
    border: 1px solid var(--border-color);
}

.chat-modal.active {
    display: flex;
}

.chat-header {
    background: #0d1f33;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.chat-header-title {
    color: white;
    font-size: 12px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 10px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.chat-header-title svg {
    width: 18px;
    height: 18px;
}

.chat-close-btn {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.3);
    width: 28px;
    height: 28px;
    border-radius: 2px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
}

.chat-close-btn:hover {
    background: rgba(255, 255, 255, 0.1);
}

.chat-close-btn svg {
    width: 16px;
    height: 16px;
    color: white;
}

.chat-body {
    display: flex;
    flex: 1;
    overflow: hidden;
}

.chat-contacts {
    width: 130px;
    background: #f9fafb;
    border-right: 1px solid var(--border-color);
    overflow-y: auto;
}

.chat-contact-item {
    padding: 10px 12px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color);
    transition: background 0.15s;
    position: relative;
}

.chat-contact-item:hover {
    background: #f3f4f6;
}

.chat-contact-item.active {
    background: #e5e7eb;
    border-left: 2px solid #0d1f33;
}

.chat-contact-name {
    font-size: 11px;
    font-weight: 500;
    color: var(--text-primary);
}

.chat-contact-tipo {
    font-size: 9px;
    color: var(--text-muted);
    margin-top: 2px;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.chat-contact-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    background: #991b1b;
    color: white;
    font-size: 9px;
    min-width: 16px;
    height: 16px;
    border-radius: 2px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chat-conversation {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.chat-messages {
    flex: 1;
    padding: 14px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    background: #fafafa;
}

.chat-message {
    max-width: 80%;
    padding: 8px 12px;
    border-radius: 2px;
    font-size: 12px;
    line-height: 1.4;
}

.chat-message.enviado {
    align-self: flex-end;
    background: #0d1f33;
    color: white;
}

.chat-message.recibido {
    align-self: flex-start;
    background: white;
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}

.chat-message-time {
    font-size: 9px;
    opacity: 0.6;
    margin-top: 4px;
}

.chat-select-contact {
    text-align: center;
    color: var(--text-muted);
    font-size: 12px;
    padding: 40px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
}

.chat-select-contact svg {
    width: 40px;
    height: 40px;
    margin-bottom: 10px;
    opacity: 0.3;
}

.chat-input-area {
    padding: 12px 14px;
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 10px;
    align-items: center;
    background: white;
}

.chat-input {
    flex: 1;
    border: 1px solid var(--border-color);
    border-radius: 2px;
    padding: 8px 12px;
    font-size: 12px;
    outline: none;
}

.chat-input:focus {
    border-color: #0d1f33;
}

.chat-send-btn {
    width: 34px;
    height: 34px;
    border-radius: 2px;
    background: #0d1f33;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
}

.chat-send-btn:hover {
    background: #1e3a5f;
}

.chat-send-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.chat-send-btn svg {
    width: 16px;
    height: 16px;
    color: white;
}

/* Estilos adicionales del chat */
.chat-back-btn {
    background: none;
    border: none;
    padding: 4px;
    cursor: pointer;
    color: white;
    display: flex;
    align-items: center;
    margin-right: 8px;
}

.chat-back-btn:hover {
    opacity: 0.8;
}

.chat-back-btn svg {
    width: 20px;
    height: 20px;
}

.chat-header-tipo {
    font-size: 11px;
    opacity: 0.8;
    margin-left: 8px;
    background: rgba(255, 255, 255, 0.2);
    padding: 2px 8px;
    border-radius: 10px;
}

.chat-contacts-full {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.chat-contact-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 16px;
    flex-shrink: 0;
    overflow: hidden;
}

.chat-contact-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.chat-contact-info {
    flex: 1;
    min-width: 0;
    margin-left: 12px;
}

.chat-admin-badge {
    background: #e53e3e;
    color: white;
    font-size: 9px;
    padding: 2px 6px;
    border-radius: 8px;
    margin-left: 6px;
    font-weight: 600;
    text-transform: uppercase;
}

.admin-contact {
    background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
    border-left: 3px solid #e53e3e;
}

.admin-contact:hover {
    background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%);
}

.chat-loading,
.chat-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: #718096;
    text-align: center;
    padding: 20px;
}

.chat-empty svg {
    width: 48px;
    height: 48px;
    margin-bottom: 12px;
    opacity: 0.5;
}

.chat-empty p {
    margin: 0;
    font-size: 14px;
}

.chat-fecha-separador {
    text-align: center;
    font-size: 11px;
    color: #718096;
    padding: 8px 0;
    position: relative;
}

.chat-fecha-separador::before,
.chat-fecha-separador::after {
    content: '';
    position: absolute;
    top: 50%;
    width: 30%;
    height: 1px;
    background: #e2e8f0;
}

.chat-fecha-separador::before {
    left: 5%;
}

.chat-fecha-separador::after {
    right: 5%;
}

.chat-message-content {
    word-wrap: break-word;
    line-height: 1.4;
}

.chat-message.enviando {
    opacity: 0.7;
}

.chat-message.error {
    border: 1px solid #e53e3e;
}

.chat-sending-indicator {
    margin-left: 4px;
    animation: pulse 1s infinite;
}

.chat-error-indicator {
    margin-left: 4px;
    color: #e53e3e;
    font-weight: bold;
}

.chat-read-indicator {
    margin-left: 4px;
    color: #38a169;
    font-size: 10px;
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

/* ==================== RESPONSIVE ==================== */

/* ========== MODO DESKTOP (1101px en adelante) ========== */
@media (min-width: 1101px) {
    .main-content {
        max-width: 1280px;
        padding: 32px 40px;
    }

    .header-content {
        max-width: 1280px;
        height: 64px;
    }

    .panel-header h2 {
        font-size: 13px;
    }

    .tab-btn {
        font-size: 13px;
        padding: 14px 20px;
    }

    .tabs-content {
        padding: 28px;
    }

    .card-header h3 {
        font-size: 12px;
    }

    .card-body {
        padding: 24px;
    }

    .form-group label {
        font-size: 11px;
    }

    .form-control {
        font-size: 14px;
        padding: 11px 14px;
    }

    .btn {
        font-size: 12px;
        padding: 10px 24px;
    }

    .data-table {
        font-size: 13px;
    }

    .data-table th {
        font-size: 11px;
        padding: 12px 14px;
    }

    .data-table td {
        padding: 12px 14px;
    }

    /* Estadisticas Desktop */
    .stats-filtros-header h3 {
        font-size: 16px;
    }

    .stats-titulo-seccion h4 {
        font-size: 15px;
    }

    .stats-kpis-executive {
        grid-template-columns: 1fr 2fr 1fr;
        gap: 20px;
    }

    .stats-kpi-main,
    .stats-kpi-approval {
        min-height: 200px;
        padding: 28px;
    }

    .kpi-circle-bg {
        width: 130px;
        height: 130px;
    }

    .gauge-number,
    .approval-percent {
        font-size: 36px;
    }

    .gauge-label,
    .approval-label {
        font-size: 10px;
    }

    .stats-kpis-secondary {
        grid-template-columns: 1fr 1fr;
        gap: 16px;
    }

    .kpi-exec-value {
        font-size: 18px;
    }

    .stats-graficos-row {
        grid-template-columns: 2fr 1fr;
        gap: 20px;
    }

    .stats-graficos-row.row-tendencia {
        grid-template-columns: 1fr 1fr;
    }

    .stats-grafico-body {
        height: 260px;
    }

    .stats-grafico-body-lg {
        height: 300px;
    }

    .stats-grafico-header h4 {
        font-size: 12px;
    }

    /* Chat Desktop */
    .chat-fab {
        width: 54px;
        height: 54px;
        bottom: 28px;
        right: 28px;
    }

    .chat-fab svg {
        width: 26px;
        height: 26px;
    }

    .chat-modal {
        width: 400px;
        height: 500px;
        bottom: 92px;
        right: 28px;
    }

    .chat-contacts {
        width: 140px;
    }

    .chat-header-title {
        font-size: 13px;
    }

    .chat-contact-name {
        font-size: 12px;
    }

    .chat-message {
        font-size: 13px;
    }

    /* Two columns en desktop */
    .two-columns {
        grid-template-columns: 1fr 1fr;
        gap: 28px;
    }

    /* Tabla de alumnos optimizada en desktop */
    .data-table td:last-child {
        width: 60px;
        text-align: center;
        padding: 4px 6px !important;
    }

    .data-table th:last-child {
        width: 60px;
        text-align: center;
    }

    /* Textos más compactos y filas más bajas en listado */
    .table-scroll .data-table {
        font-size: 11px;
    }

    .table-scroll .data-table td {
        padding: 6px 10px;
        line-height: 1.3;
    }

    .table-scroll .data-table th {
        padding: 8px 10px;
        font-size: 9px;
    }
}

/* ========== MODO TABLET (700px a 1100px) ========== */
@media (min-width: 700px) and (max-width: 1100px) {
    .main-content {
        max-width: 100%;
        padding: 24px;
    }

    .main-header {
        padding: 0 24px;
    }

    .header-content {
        height: 58px;
    }

    .user-info {
        font-size: 12px;
    }

    .current-date {
        font-size: 11px;
    }

    /* Filtros Notas por Curso - en linea */
    .filtros-notas-inline {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        gap: 12px;
        align-items: flex-end;
    }

    .filtros-notas-inline .form-group {
        flex: 1;
        min-width: 0;
    }

    .panel-header {
        padding: 12px 20px;
    }

    .panel-header h2 {
        font-size: 11px;
    }

    .tab-btn {
        font-size: 11px;
        padding: 12px 12px;
        letter-spacing: 0.02em;
    }

    .tabs-content {
        padding: 20px;
    }

    .card-header {
        padding: 10px 16px;
    }

    .card-header h3 {
        font-size: 10px;
    }

    .card-body {
        padding: 18px;
    }

    .form-group label {
        font-size: 10px;
    }

    .form-control {
        font-size: 13px;
        padding: 9px 12px;
    }

    .btn {
        font-size: 11px;
        padding: 8px 18px;
    }

    .btn-sm {
        font-size: 10px;
        padding: 5px 10px;
    }

    .data-table {
        font-size: 12px;
    }

    .data-table th {
        font-size: 9px;
        padding: 10px 10px;
    }

    .data-table td {
        padding: 10px 10px;
    }

    /* Two columns en tablet - una columna */
    .two-columns {
        grid-template-columns: 1fr;
        gap: 20px;
    }

    /* Mostrar sub-tabs en tablet */
    .sub-tabs-mobile {
        display: flex;
        border: 1px solid var(--border-color);
        border-radius: 0;
        overflow: hidden;
        margin-bottom: 16px;
    }

    .sub-tab-btn {
        font-size: 10px;
        padding: 10px 14px;
        text-transform: uppercase;
        letter-spacing: 0.04em;
    }

    .sub-tab-btn.active {
        background: #0d1f33;
    }

    .hidden-mobile {
        display: none !important;
    }

    /* Form en tablet */
    .form-row {
        grid-template-columns: 1fr 1fr;
        gap: 14px;
    }

    .form-row-tres {
        grid-template-columns: 1fr 1fr 1fr;
    }

    .checkbox-4-columnas {
        grid-template-columns: repeat(3, 1fr);
    }

    /* Especialidades en Tablet */
    .especialidades-grid .checkbox-item label {
        font-size: 10px;
    }

    .especialidades-grid .checkbox-item input[type="checkbox"] {
        width: 13px;
        height: 13px;
    }

    /* Estadisticas Tablet */
    .stats-filtros-panel {
        padding: 18px;
    }

    .stats-filtros-header h3 {
        font-size: 14px;
    }

    .stats-filtros-header p {
        font-size: 11px;
    }

    .stats-titulo-seccion h4 {
        font-size: 13px;
    }

    .stats-kpis-executive {
        grid-template-columns: 1fr 1fr;
        gap: 16px;
    }

    .stats-kpi-main {
        grid-column: 1;
    }

    .stats-kpi-approval {
        grid-column: 2;
    }

    .stats-kpis-secondary {
        grid-column: 1 / -1;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
    }

    .stats-kpi-main,
    .stats-kpi-approval {
        min-height: 160px;
        padding: 20px;
    }

    .kpi-circle-bg {
        width: 100px;
        height: 100px;
    }

    .gauge-number,
    .approval-percent {
        font-size: 28px;
    }

    .gauge-label,
    .approval-label {
        font-size: 8px;
    }

    .gauge-subtext,
    .approval-subtext {
        font-size: 10px;
    }

    .kpi-exec-label {
        font-size: 9px;
    }

    .kpi-exec-value {
        font-size: 15px;
    }

    .kpi-exec-subtext {
        font-size: 10px;
    }

    .stats-graficos-row {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    .stats-graficos-row:nth-child(odd) {
        grid-template-columns: 1fr;
    }

    .stats-grafico-header {
        padding: 10px 14px;
    }

    .stats-grafico-header h4 {
        font-size: 10px;
    }

    .stats-grafico-badge {
        font-size: 8px;
        padding: 2px 6px;
    }

    .stats-grafico-body {
        height: 220px;
        padding: 14px;
    }

    .stats-grafico-body-lg {
        height: 250px;
    }

    /* Docente Tablet */
    .docente-autocomplete-dropdown {
        max-height: 180px;
    }

    .docente-autocomplete-item {
        padding: 9px 11px;
        font-size: 12px;
    }

    .docente-nota-badge {
        padding: 3px 8px;
        font-size: 11px;
        min-width: 36px;
    }

    .asistencia-circle {
        width: 22px;
        height: 22px;
    }

    .docente-filtros-row {
        gap: 14px;
    }

    .docente-kpis-grid {
        grid-template-columns: repeat(3, 1fr) !important;
    }

    .docente-kpi-card {
        padding: 10px !important;
    }

    .docente-kpi-value {
        font-size: 18px !important;
    }

    .docente-kpi-label {
        font-size: 10px !important;
    }

    .docente-charts-grid {
        grid-template-columns: 1fr 1fr !important;
    }

    .docente-chart-container {
        height: 200px !important;
    }

    /* Chat Tablet */
    .chat-fab {
        width: 48px;
        height: 48px;
        bottom: 20px;
        right: 20px;
    }

    .chat-fab svg {
        width: 22px;
        height: 22px;
    }

    .chat-modal {
        width: 340px;
        height: 440px;
        bottom: 78px;
        right: 20px;
    }

    .chat-contacts {
        width: 110px;
    }

    .chat-header {
        padding: 10px 14px;
    }

    .chat-header-title {
        font-size: 11px;
    }

    .chat-contact-name {
        font-size: 11px;
    }

    .chat-contact-tipo {
        font-size: 8px;
    }

    .chat-message {
        font-size: 12px;
        padding: 7px 11px;
    }

    .chat-input {
        font-size: 11px;
        padding: 7px 11px;
    }

    .chat-send-btn {
        width: 32px;
        height: 32px;
    }

    /* Modal Tablet */
    .modal {
        max-width: 480px;
    }

    .modal-header h3 {
        font-size: 12px;
    }

    .modal-body {
        padding: 20px 18px;
    }

    /* Footer Tablet */
    .main-footer {
        font-size: 10px;
        padding: 12px 20px;
    }

    .footer-creditos {
        font-size: 9px;
        margin-top: 6px;
    }

    /* Header Tablet - Administrador y establecimiento */
    .brand-mobile .rol-titulo {
        font-size: 14px;
    }

    .brand-mobile .establecimiento-nombre {
        font-size: 10px;
    }

    /* KPIs de graficos - 2 por fila en tablet */
    .stats-kpis-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 10px;
    }

    /* Graficos - 2 por fila en tablet */
    .stats-graficos-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 12px;
    }

    .stats-grafico-card {
        min-width: 0;
    }

    .stats-grafico-body {
        height: 160px;
        padding: 10px;
    }

    .stats-grafico-header h4 {
        font-size: 11px;
    }

    /* Filtros Vista y Curso en la misma fila */
    .stats-filtros-row {
        display: flex;
        flex-direction: row;
        gap: 12px;
    }

    .stats-filtro-grupo {
        flex: 1;
        min-width: 0;
    }
}

/* ========== MODO MOVIL (0px a 699px) ========== */
@media (max-width: 699px) {
    .main-content {
        padding: 12px;
    }

    .main-header {
        padding: 0 12px;
    }

    .header-content {
        height: 50px;
    }

    .logo {
        width: 34px;
        height: 34px;
    }

    .logo-icon {
        font-size: 16px;
    }

    .user-info,
    .current-date {
        display: none;
    }

    .btn-logout {
        width: 32px;
        height: 32px;
        padding: 6px;
    }

    .btn-logout svg {
        width: 16px;
        height: 16px;
    }

    .control-panel {
        border: none;
        box-shadow: none;
    }

    .panel-header {
        padding: 10px 14px;
    }

    .panel-header h2 {
        font-size: 10px;
        letter-spacing: 0.08em;
    }

    /* Tabs en movil - scroll horizontal */
    .tabs-nav {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .tab-btn {
        font-size: 9px;
        padding: 10px 10px;
        white-space: nowrap;
        min-width: auto;
        flex: 0 0 auto;
    }

    .tabs-content {
        padding: 14px;
    }

    /* Sub-tabs movil */
    .sub-tabs-mobile {
        display: flex;
        border: 1px solid var(--border-color);
        border-radius: 0;
        overflow: hidden;
        margin-bottom: 14px;
    }

    .sub-tab-btn {
        font-size: 9px;
        padding: 8px 10px;
        text-transform: uppercase;
        letter-spacing: 0.03em;
    }

    .sub-tab-btn.active {
        background: #0d1f33;
    }

    .hidden-mobile {
        display: none !important;
    }

    /* Cards movil */
    .card {
        border-left: none;
        border-right: none;
    }

    .card-header {
        padding: 10px 14px;
    }

    .card-header h3 {
        font-size: 9px;
        letter-spacing: 0.06em;
    }

    .card-body {
        padding: 14px;
    }

    /* Two columns movil */
    .two-columns {
        grid-template-columns: 1fr;
        gap: 14px;
    }

    /* Forms movil */
    .form-row {
        grid-template-columns: 1fr;
        gap: 0;
    }

    .form-row-tres {
        grid-template-columns: 1fr;
    }

    /* Formulario Alumnos - reorganizar campos en movil */
    .form-alumnos-grid {
        grid-template-columns: 1fr 1fr;
        grid-template-areas:
            "curso rut"
            "fecha sexo"
            "nombres nombres"
            "apellidos apellidos";
        gap: 12px;
    }

    .form-alumnos-grid .grupo-curso {
        grid-area: curso;
    }

    .form-alumnos-grid .grupo-rut {
        grid-area: rut;
    }

    .form-alumnos-grid .grupo-fecha {
        grid-area: fecha;
    }

    .form-alumnos-grid .grupo-sexo {
        grid-area: sexo;
    }

    .form-alumnos-grid .grupo-nombres {
        grid-area: nombres;
    }

    .form-alumnos-grid .grupo-apellidos {
        grid-area: apellidos;
    }

    /* RUT y Telefono en misma fila en movil */
    .form-row-rut-tel {
        display: grid;
        grid-template-columns: 1fr 1fr !important;
        gap: 12px;
    }

    /* RUT y Correo en misma fila en movil */
    .form-row-rut-email {
        display: grid;
        grid-template-columns: 1fr 1fr !important;
        gap: 12px;
    }

    /* Correo y Parentesco en misma fila en movil */
    .form-row-correo-parentesco {
        display: grid;
        grid-template-columns: 1fr 1fr !important;
        gap: 12px;
    }

    /* Botones de Apoderado en movil */
    .apoderado-botones-container {
        gap: 6px;
    }

    .apoderado-boton {
        padding: 8px 10px;
    }

    .apoderado-boton-texto {
        font-size: 9px;
        letter-spacing: 0.04em;
    }

    .apoderado-boton-texto .texto-desktop {
        display: none;
    }

    .apoderado-boton-texto .texto-mobile {
        display: inline;
    }

    .apoderado-boton-arrow {
        font-size: 8px;
    }

    .apoderado-checkbox {
        width: 14px;
        height: 14px;
    }

    .apoderado-checkbox span {
        font-size: 10px;
    }

    /* Tabla asignaciones - textos cortos en movil */
    .tabla-asignaciones .th-desktop {
        display: none;
    }

    .tabla-asignaciones .th-mobile {
        display: inline;
    }

    .tabla-asignaciones th {
        font-size: 9px;
        padding: 6px 4px;
        white-space: nowrap;
    }

    /* Todos los selects mas pequeños en movil */
    select.form-control {
        font-size: 11px;
        padding: 8px 6px;
    }

    select.form-control option {
        font-size: 11px;
    }

    /* Filtros de listado en 2 columnas en movil */
    .filtros-alumnos {
        width: 100%;
        overflow: visible;
    }

    .form-row-filtros {
        display: grid;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px;
        width: 100%;
    }

    .form-row-filtros .form-group {
        margin-bottom: 8px;
        min-width: 0;
    }

    .form-row-filtros .form-control {
        font-size: 10px;
        padding: 6px 4px;
        width: 100%;
    }

    .form-row-filtros label {
        font-size: 9px;
    }

    /* Filtros de Asignaciones en movil */
    .filtros-asignaciones .form-control {
        font-size: 10px;
        padding: 6px 4px;
    }

    .filtros-asignaciones .form-control option {
        font-size: 10px;
    }

    .filtros-asignaciones label {
        font-size: 9px;
    }

    /* Selects de formulario Asignaciones en movil */
    .sub-tabs-asignaciones~.two-columns .form-control {
        font-size: 10px;
        padding: 6px 4px;
    }

    .sub-tabs-asignaciones~.two-columns .form-control option {
        font-size: 10px;
    }

    .sub-tabs-asignaciones~.two-columns label {
        font-size: 9px;
    }

    /* Custom Select para movil */
    .custom-select-container {
        position: relative;
        width: 100%;
        z-index: 50;
    }

    .custom-select-container:has(.custom-select-options) {
        z-index: 1000;
    }

    .form-group:has(.custom-select-options) {
        z-index: 1000;
        position: relative;
    }

    .form-row-filtros {
        overflow: visible !important;
        position: relative;
    }

    .form-row-filtros .form-group {
        position: relative;
    }

    .card-body {
        overflow: visible;
    }

    .card {
        overflow: visible;
    }

    .two-columns,
    .two-columns .column {
        overflow: visible;
    }

    .stats-filtros-panel,
    .stats-filtros-grid,
    .stats-filtros-row,
    .stats-filtro-grupo {
        overflow: visible;
        position: relative;
    }

    .estadisticas-dashboard {
        overflow: visible;
    }

    .custom-select-trigger {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 10px;
        background: #ffffff;
        border: 1px solid #d1d5db;
        border-radius: 4px;
        font-size: 10px;
        color: #1f2937;
        cursor: pointer;
    }

    .custom-select-trigger span:first-child {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        flex: 1;
    }

    .custom-select-arrow {
        font-size: 8px;
        color: #6b7280;
        margin-left: 6px;
    }

    .custom-select-options {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: #ffffff;
        border: 1px solid #d1d5db;
        border-top: none;
        border-radius: 0 0 4px 4px;
        max-height: 150px;
        overflow-y: auto;
        z-index: 9999;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .custom-select-option {
        padding: 8px 10px;
        font-size: 10px;
        color: #1f2937;
        cursor: pointer;
        border-bottom: 1px solid #f3f4f6;
    }

    .custom-select-option:last-child {
        border-bottom: none;
    }

    .custom-select-option:hover {
        background: #f3f4f6;
    }

    .custom-select-option.selected {
        background: #e5edff;
        color: #1e40af;
        font-weight: 500;
    }

    /* Tabla de alumnos compacta en movil */
    .table-responsive.table-scroll {
        max-height: 350px;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        border: 1px solid #e2e8f0;
        border-radius: 4px;
        width: calc(100% + 52px);
        margin-left: -26px;
        margin-right: -26px;
    }

    .table-responsive.table-scroll .data-table {
        width: 100%;
        font-size: 9px;
        table-layout: fixed;
    }

    .table-responsive.table-scroll .data-table th,
    .table-responsive.table-scroll .data-table td {
        padding: 5px 4px;
        white-space: normal;
        word-wrap: break-word;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .table-responsive.table-scroll .data-table th:nth-child(1),
    .table-responsive.table-scroll .data-table td:nth-child(1) {
        width: 35%;
    }

    .table-responsive.table-scroll .data-table th:nth-child(2),
    .table-responsive.table-scroll .data-table td:nth-child(2) {
        width: 25%;
    }

    .table-responsive.table-scroll .data-table th:nth-child(3),
    .table-responsive.table-scroll .data-table td:nth-child(3) {
        width: 20%;
    }

    .table-responsive.table-scroll .data-table th:nth-child(4),
    .table-responsive.table-scroll .data-table td:nth-child(4) {
        width: 20%;
    }

    .table-responsive.table-scroll .acciones-btns {
        gap: 2px;
    }

    .table-responsive.table-scroll .btn-icon {
        padding: 4px;
    }

    /* Botones Limpiar y Agregar en misma fila en movil */
    .form-actions.form-actions-alumnos,
    .form-actions.form-actions-docentes,
    .form-actions.form-actions-asignaciones,
    .form-actions.form-actions-comunicados {
        flex-direction: row !important;
        gap: 10px;
    }

    .form-actions.form-actions-alumnos .btn,
    .form-actions.form-actions-docentes .btn,
    .form-actions.form-actions-asignaciones .btn,
    .form-actions.form-actions-comunicados .btn {
        flex: 1;
        padding: 10px 12px;
    }

    .form-group {
        margin-bottom: 14px;
    }

    .form-group label {
        font-size: 9px;
        margin-bottom: 5px;
    }

    .form-control {
        font-size: 11px;
        padding: 8px 6px;
    }

    .form-control::placeholder {
        font-size: 10px;
    }

    .checkbox-4-columnas {
        grid-template-columns: 1fr 1fr;
        gap: 6px;
    }

    .checkbox-item label {
        font-size: 11px;
    }

    .checkbox-item input[type="checkbox"] {
        width: 14px;
        height: 14px;
    }

    /* Especialidades en Movil */
    .especialidades-grid .checkbox-item label {
        font-size: 10px;
    }

    .especialidades-grid .checkbox-item input[type="checkbox"] {
        width: 12px;
        height: 12px;
    }

    .form-actions {
        flex-direction: column;
        gap: 8px;
        padding-top: 14px;
    }

    .btn {
        width: 100%;
        font-size: 11px;
        padding: 11px 16px;
        text-align: center;
    }

    .btn-sm {
        font-size: 9px;
        padding: 5px 8px;
    }

    /* Tabla movil */
    .table-responsive {
        margin: 0 -14px;
        padding: 0 14px;
    }

    .data-table {
        font-size: 11px;
    }

    .data-table th {
        font-size: 8px;
        padding: 8px 6px;
        letter-spacing: 0.05em;
    }

    .data-table td {
        padding: 8px 6px;
    }

    /* Estadisticas Movil */
    .estadisticas-container {
        gap: 14px;
    }

    .stats-filtros-panel {
        padding: 14px;
        overflow: visible !important;
        position: relative;
        z-index: 10;
    }

    .stats-filtros-header h3 {
        font-size: 12px;
    }

    .stats-filtros-header p {
        font-size: 10px;
        margin-bottom: 12px;
    }

    .stats-filtros-grid {
        flex-direction: column;
        gap: 8px;
        overflow: visible !important;
        position: relative;
    }

    .stats-filtros-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        overflow: visible !important;
        position: relative;
    }

    .stats-filtros-row-segundo {
        grid-template-columns: 1fr;
        width: 50%;
    }

    .stats-filtro-grupo {
        min-width: auto;
        overflow: visible !important;
        position: relative;
    }

    .stats-filtro-grupo label {
        font-size: 9px;
    }

    .stats-filtro-grupo select {
        font-size: 12px;
        padding: 8px 10px;
    }

    .stats-filtro-grupo .custom-select-container {
        position: relative;
        z-index: 100;
    }

    .stats-filtro-grupo .custom-select-options {
        z-index: 9999 !important;
    }

    .stats-titulo-seccion h4 {
        font-size: 11px;
    }

    .stats-kpis-executive {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }

    .stats-kpi-main,
    .stats-kpi-approval {
        min-height: 120px;
        padding: 14px;
    }

    .kpi-circle-bg {
        width: 70px;
        height: 70px;
    }

    .kpi-circle-blanco {
        border-width: 2px;
    }

    .gauge-number,
    .approval-percent {
        font-size: 20px;
    }

    .gauge-label,
    .approval-label {
        font-size: 7px;
        letter-spacing: 0.08em;
    }

    .gauge-footer,
    .approval-footer {
        padding-top: 6px;
    }

    .gauge-subtext,
    .approval-subtext {
        font-size: 8px;
    }

    .stats-kpis-secondary {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .stats-kpi-exec-card {
        padding: 12px 14px;
    }

    .kpi-exec-label {
        font-size: 8px;
    }

    .kpi-exec-badge {
        font-size: 7px;
        padding: 1px 5px;
    }

    .kpi-exec-value {
        font-size: 14px;
    }

    .kpi-exec-subtext {
        font-size: 9px;
    }

    .kpi-exec-bar {
        height: 3px;
    }

    .stats-graficos-row {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .stats-graficos-row:nth-child(odd) {
        grid-template-columns: 1fr;
    }

    .stats-grafico-card {
        border-left: none;
        border-right: none;
    }

    .stats-grafico-header {
        padding: 10px 14px;
    }

    .stats-grafico-header h4 {
        font-size: 9px;
    }

    .stats-grafico-badge {
        font-size: 7px;
        padding: 2px 5px;
    }

    .stats-grafico-body {
        height: 180px;
        padding: 12px;
    }

    .stats-grafico-body-lg {
        height: 200px;
    }

    /* Docente Movil */
    .docente-autocomplete-dropdown {
        max-height: 150px;
    }

    .docente-autocomplete-item {
        padding: 8px 10px;
        font-size: 10px;
    }

    .docente-nota-badge {
        padding: 2px 6px;
        font-size: 9px;
        min-width: 30px;
    }

    .asistencia-circle {
        width: 18px;
        height: 18px;
    }

    .docente-filtros-row {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .docente-filtros-actions {
        justify-content: flex-end;
    }

    /* Asistencia docente movil */
    .docente-asistencia-filtros-row {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }

    .docente-asistencia-filtros-row .form-group label {
        font-size: 10px;
    }

    .docente-asistencia-filtros-row .form-control,
    .docente-asistencia-filtros-row .custom-select-trigger {
        font-size: 10px;
        padding: 6px 8px;
    }

    .docente-asistencia-info-movil {
        text-align: center;
        margin-bottom: 12px;
    }

    .docente-asistencia-titulo-movil {
        font-size: 11px;
        color: #64748b;
        margin: 0 0 8px 0;
    }

    .docente-asistencia-conteo-movil {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 8px;
        font-size: 10px;
    }

    .docente-asistencia-acciones {
        justify-content: center;
        gap: 8px;
        margin-top: 12px;
    }

    .docente-asistencia-acciones .btn {
        flex: 1;
        padding: 6px 10px;
    }

    .docente-filtros-actions .btn {
        padding: 6px 10px;
    }

    /* Pestañas móviles para docente */
    .mobile-subtabs {
        display: flex;
        gap: 0;
        margin-bottom: 16px;
        background: #e2e8f0;
        border-radius: 8px;
        padding: 4px;
    }

    .mobile-subtab {
        flex: 1;
        padding: 10px 8px;
        border: none;
        background: transparent;
        font-size: 11px;
        font-weight: 500;
        color: #64748b;
        cursor: pointer;
        border-radius: 6px;
        transition: all 0.2s ease;
    }

    .mobile-subtab.active {
        background: white;
        color: #1e3a5f;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    /* Filas de formulario móvil */
    .form-row-movil {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-bottom: 12px;
    }

    .form-row-movil .form-group {
        margin-bottom: 0;
    }

    .form-row-movil .form-group label {
        font-size: 10px;
        margin-bottom: 4px;
    }

    .form-row-movil .form-control,
    .form-row-movil .custom-select-trigger {
        font-size: 11px;
        padding: 8px 10px;
    }

    /* Botones de formulario móvil */
    .form-actions-movil {
        flex-direction: row !important;
        gap: 10px;
        justify-content: center;
    }

    .form-actions-movil .btn {
        flex: 1;
        width: auto !important;
        padding: 8px 12px;
    }

    /* Tabla compacta móvil - Override para tablas de 6 columnas (ModificarNotaTab) */
    .table-responsive.table-scroll table.tabla-compacta-movil {
        width: 100%;
        border-collapse: collapse;
        table-layout: auto !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil th,
    .table-responsive.table-scroll table.tabla-compacta-movil td {
        padding: 6px 4px !important;
        font-size: 9px !important;
        text-align: left;
        border-bottom: 1px solid #e5e7eb;
        width: auto !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil th {
        font-size: 8px !important;
        letter-spacing: 0;
        background: #0d1f33;
        color: white;
    }

    /* Ancho específico para columnas de ModificarNotaTab */
    .table-responsive.table-scroll table.tabla-compacta-movil th:nth-child(1),
    .table-responsive.table-scroll table.tabla-compacta-movil td:nth-child(1) {
        width: 22% !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil th:nth-child(2),
    .table-responsive.table-scroll table.tabla-compacta-movil td:nth-child(2) {
        width: 18% !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil th:nth-child(3),
    .table-responsive.table-scroll table.tabla-compacta-movil td:nth-child(3) {
        width: 12% !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil th:nth-child(4),
    .table-responsive.table-scroll table.tabla-compacta-movil td:nth-child(4) {
        width: 12% !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil th:nth-child(5),
    .table-responsive.table-scroll table.tabla-compacta-movil td:nth-child(5) {
        width: 18% !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil th:nth-child(6),
    .table-responsive.table-scroll table.tabla-compacta-movil td:nth-child(6) {
        width: 18% !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil .acciones-btns {
        gap: 2px;
        display: flex;
        justify-content: center;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil .btn-icon {
        width: 20px !important;
        height: 20px !important;
        padding: 2px !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil .btn-icon svg {
        width: 10px !important;
        height: 10px !important;
    }

    .table-responsive.table-scroll table.tabla-compacta-movil .docente-nota-badge {
        font-size: 9px !important;
        padding: 2px 4px !important;
    }

    .docente-tabla-asistencia {
        font-size: 10px;
    }

    .docente-tabla-asistencia th,
    .docente-tabla-asistencia td {
        padding: 6px 4px;
    }

    .docente-tabla-asistencia .asistencia-circle {
        width: 16px;
        height: 16px;
    }

    .docente-kpis-grid {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 6px !important;
    }

    .docente-kpi-card {
        padding: 6px !important;
        gap: 4px !important;
        flex-direction: column !important;
        align-items: center !important;
        text-align: center;
    }

    .docente-kpi-icon {
        width: 22px !important;
        height: 22px !important;
    }

    .docente-kpi-icon svg {
        width: 10px !important;
        height: 10px !important;
    }

    .docente-kpi-value {
        font-size: 13px !important;
    }

    .docente-kpi-label {
        font-size: 7px !important;
    }

    .docente-kpi-trend {
        font-size: 6px !important;
        padding: 1px 2px !important;
    }

    .docente-kpi-data {
        align-items: center !important;
    }

    .docente-kpi-label-row {
        flex-direction: column !important;
        gap: 2px !important;
    }

    .docente-charts-grid {
        grid-template-columns: 1fr !important;
        gap: 3px !important;
        margin-top: 10px !important;
    }

    .card.docente-chart-card {
        margin-bottom: 0 !important;
    }

    .card.docente-chart-card>.card-header {
        padding: 8px 10px !important;
    }

    .card.docente-chart-card>.card-header h3 {
        font-size: 11px !important;
        margin: 0 !important;
    }

    .card.docente-chart-card>.card-body.docente-chart-container {
        height: 200px !important;
        padding: 8px !important;
        display: flex !important;
        align-items: stretch !important;
    }

    .card.docente-chart-card>.card-body.docente-chart-container>canvas {
        width: 100% !important;
        height: 100% !important;
        max-height: 100% !important;
    }

    .card.docente-chart-card>.card-body.docente-chart-sm {
        height: 220px !important;
    }

    .docente-tabla-trimestres-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .docente-tabla-trimestres {
        font-size: 9px;
        border-collapse: separate;
        border-spacing: 0;
    }

    .docente-tabla-trimestres th,
    .docente-tabla-trimestres td {
        padding: 4px 3px;
    }

    /* Columna N - Sticky (solo primera fila del thead y todas las filas del tbody) */
    .docente-tabla-trimestres thead tr:first-child th:first-child,
    .docente-tabla-trimestres td:first-child {
        position: sticky;
        left: 0;
        z-index: 2;
        background: #0d1f33;
        min-width: 25px;
        width: 25px;
    }

    .docente-tabla-trimestres tbody td:first-child {
        background: #fff;
        border-right: 1px solid #e5e7eb;
    }

    /* Reset para celdas th-sub en segunda fila (N1, N2, etc.) */
    .docente-tabla-trimestres .th-sub {
        position: sticky;
        top: 0;
        left: auto;
        z-index: 1;
    }

    /* Columna Alumno - Sticky */
    .docente-tabla-trimestres .th-alumno,
    .docente-tabla-trimestres .td-alumno {
        position: sticky;
        left: 25px;
        z-index: 2;
        min-width: 90px;
        max-width: 90px;
        font-size: 8px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .docente-tabla-trimestres .th-alumno {
        background: #0d1f33;
    }

    .docente-tabla-trimestres .td-alumno {
        background: #fff;
        border-right: 2px solid #cbd5e1;
    }

    /* Headers sticky en su fila */
    .docente-tabla-trimestres thead th {
        position: sticky;
        top: 0;
        z-index: 1;
    }

    .docente-tabla-trimestres thead tr:first-child th:first-child,
    .docente-tabla-trimestres thead .th-alumno {
        z-index: 3;
    }


    /* =========================================
       Chat Flotante - Professional Redesign 
       ========================================= */

    .chat-modal {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 1000px !important;
        max-width: 95vw !important;
        /* Adapt to screen width */
        height: 700px !important;
        max-height: 90vh !important;
        /* Adapt to screen height */
        border-radius: 16px;
        border: 1px solid rgba(0, 0, 0, 0.08);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15), 0 5px 15px rgba(0, 0, 0, 0.05);
        /* Sombras suaves profundas */
        display: flex;
        flex-direction: row;
        /* Layout horizontal principal */
        overflow: hidden;
        background: #fff;
        z-index: 9999;
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }

    .chat-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(15, 23, 42, 0.4);
        /* Slate oscuro semi-transparente */
        backdrop-filter: blur(2px);
        z-index: 9998;
    }

    /* --- Sidebar (Izquierda) --- */
    .chat-contacts-full {
        width: 340px !important;
        min-width: 340px !important;
        background: #fff;
        border-right: 1px solid #e2e8f0;
        display: flex;
        flex-direction: column;
        z-index: 2;
    }

    /* Header del Sidebar (Buscador y Tabs) */
    .chat-sidebar-header {
        padding: 16px;
        background: #fff;
        border-bottom: 1px solid #f1f5f9;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .chat-sidebar-title {
        font-size: 18px;
        font-weight: 700;
        color: #0f172a;
        margin-bottom: 4px;
    }

    .chat-tabs {
        display: flex;
        background: #f1f5f9;
        padding: 4px;
        border-radius: 8px;
        gap: 2px;
    }

    .chat-tab {
        flex: 1;
        font-size: 12px;
        font-weight: 500;
        padding: 6px 4px;
        text-align: center;
        border-radius: 6px;
        color: #64748b;
        background: transparent;
        transition: all 0.2s ease;
        border: none;
        cursor: pointer;
    }

    .chat-tab.active {
        background: #fff;
        color: var(--primary-color);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        font-weight: 600;
    }

    /* Lista de Contactos */
    .chat-students-list {
        flex: 1;
        overflow-y: auto;
        padding: 8px;
        /* Espacio alrededor de items */
    }

    .chat-contact-item {
        padding: 10px 12px;
        border-radius: 8px;
        /* Items redondeados flotantes */
        margin-bottom: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 12px;
        border: 1px solid transparent;
        /* Evita salto al hover si se agrega borde */
    }

    .chat-contact-item:hover {
        background: #f8fafc;
    }

    .chat-contact-item.active {
        background: #eff6ff;
        /* Azul muy suave */
        border-color: #dbeafe;
    }

    .chat-contact-avatar {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: #e2e8f0;
        color: #64748b;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 16px;
        overflow: hidden;
        flex-shrink: 0;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
    }

    .chat-contact-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .chat-contact-info {
        flex: 1;
        min-width: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .chat-contact-name {
        font-size: 14px;
        font-weight: 600;
        color: #334155;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        line-height: 1.2;
    }

    .chat-contact-tipo {
        font-size: 11px;
        color: #94a3b8;
        margin-top: 2px;
        font-weight: 400;
    }

    .chat-admin-badge {
        background: #0f172a;
        color: white;
        font-size: 9px;
        padding: 1px 4px;
        border-radius: 3px;
        margin-left: 6px;
        vertical-align: middle;
    }

    /* --- Chat Area (Derecha) --- */
    .chat-messages-area {
        flex: 1;
        display: flex;
        flex-direction: column;
        background: #fff;
        position: relative;
    }

    /* Header Principal del Chat (Derecha) */
    .chat-main-header {
        height: 64px;
        /* Altura fija consistente */
        padding: 0 24px;
        background: #0d1f33;
        /* Dark Navy Professional */
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: white;
        flex-shrink: 0;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        z-index: 10;
    }

    .chat-header-user-info {
        display: flex;
        flex-direction: column;
    }

    .chat-header-name {
        font-size: 16px;
        font-weight: 600;
        color: #fff;
        line-height: 1.2;
    }

    .chat-header-subtitle {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.7);
    }

    .chat-header-actions {
        display: flex;
        align-items: center;
        gap: 16px;
    }

    /* Boton cerrar estilo moderno */
    .chat-close-btn-modern {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: white;
        width: 32px;
        height: 32px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background 0.2s;
    }

    .chat-close-btn-modern:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    /* Placeholder State */
    .chat-placeholder {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: #f8fafc;
        color: #94a3b8;
        padding: 40px;
    }

    .chat-placeholder-icon {
        width: 80px;
        height: 80px;
        color: #e2e8f0;
        margin-bottom: 20px;
    }

    .chat-placeholder-text {
        font-size: 16px;
        font-weight: 500;
        color: #64748b;
    }


    /* Mensajes Body */
    .chat-messages {
        flex: 1;
        padding: 24px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 12px;
        background: #f8fafc;
        /* Fondo muy suave */
    }

    .chat-message {
        max-width: 70%;
        padding: 12px 16px;
        border-radius: 12px;
        font-size: 14px;
        line-height: 1.5;
        position: relative;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        /* Sombra sutil mensaje */
        display: flex;
        flex-direction: column;
    }

    .chat-message.enviado {
        background: var(--primary-color);
        color: white;
        align-self: flex-end;
        border-bottom-right-radius: 2px;
        /* Forma burbuja */
    }

    .chat-message.enviado .chat-message-time {
        color: rgba(255, 255, 255, 0.8);
    }

    .chat-message.recibido {
        background: white;
        color: #1e293b;
        align-self: flex-start;
        border-bottom-left-radius: 2px;
        border: 1px solid #e2e8f0;
    }

    .chat-message-time {
        font-size: 10px;
        margin-top: 4px;
        align-self: flex-end;
        display: flex;
        align-items: center;
        gap: 4px;
        opacity: 0.8;
    }

    /* Input Area Moderna */
    .chat-input-area {
        padding: 20px 24px;
        background: #fff;
        border-top: 1px solid #f1f5f9;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .chat-input {
        flex: 1;
        background: #f1f5f9;
        border: 1px solid transparent;
        border-radius: 12px;
        /* Pill shape */
        padding: 12px 20px;
        font-size: 14px;
        color: #334155;
        outline: none;
        transition: border 0.2s, background 0.2s;
    }

    .chat-input:focus {
        background: #fff;
        border-color: #cbd5e1;
        box-shadow: 0 0 0 3px rgba(226, 232, 240, 0.5);
    }

    .chat-send-btn {
        width: 44px;
        height: 44px;
        border-radius: 12px;
        background: var(--primary-color);
        color: white;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: transform 0.1s, opacity 0.2s;
    }

    .chat-send-btn:hover:not(:disabled) {
        opacity: 0.9;
    }

    .chat-send-btn:active:not(:disabled) {
        transform: scale(0.95);
    }

    .chat-send-btn:disabled {
        background: #cbd5e1;
        cursor: not-allowed;
    }

    /* Toggle Permisos Header Integration */
    .header-toggle-container {
        display: flex;
        align-items: center;
        gap: 8px;
        background: rgba(255, 255, 255, 0.1);
        padding: 4px 8px 4px 12px;
        border-radius: 20px;
        margin-right: 12px;
    }

    .header-toggle-label {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.9);
        font-weight: 500;
    }

    /* Switch Custom Moderno */
    .modern-switch {
        width: 36px;
        height: 20px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 12px;
        position: relative;
        cursor: pointer;
        transition: background 0.3s;
    }

    .modern-switch.checked {
        background: #22c55e;
        /* Green success */
    }

    .modern-switch::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 16px;
        height: 16px;
        background: white;
        border-radius: 50%;
        transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .modern-switch.checked::after {
        transform: translateX(16px);
    }

    .chat-overlay {
        background: rgba(0, 0, 0, 0.5);
        /* Fondo más oscuro para foco */
    }


    /* Responsividad Mobile para Chat */
    @media (max-width: 768px) {
        .chat-modal {
            width: 100% !important;
            height: 100% !important;
            bottom: 0;
            right: 0;
            border-radius: 0;
        }

        .chat-contacts-full {
            width: 100% !important;
        }

        .hidden-mobile {
            display: none !important;
        }

        .chat-header-actions {
            gap: 8px;
        }
    }

    /* Asegurar que el icono del placeholder no se desborde */
    .chat-placeholder svg {
        width: 80px !important;
        height: 80px !important;
        max-width: 100%;
        color: #e2e8f0;
    }

    /* Modal Movil */
    .modal-overlay {
        padding: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal {
        width: 90%;
        max-width: 320px;
        height: auto;
        max-height: 60vh;
        border-radius: 8px;
        border: 1px solid #e2e8f0;
        display: flex;
        flex-direction: column;
    }

    .modal-header {
        padding: 12px 14px;
        flex-shrink: 0;
    }

    .modal-header h3 {
        font-size: 11px;
    }

    .modal-body {
        padding: 16px 14px;
        overflow-y: auto;
        flex: 1;
        min-height: 0;
    }

    .modal-footer {
        padding: 12px 14px;
        flex-direction: row;
        gap: 8px;
        flex-shrink: 0;
    }

    .modal-footer .btn {
        flex: 1;
        padding: 8px 12px;
        font-size: 11px;
    }

    /* Modal Mensaje Movil */
    .modal-mensaje {
        width: 85%;
        max-width: 280px;
        border-radius: 12px;
    }

    .modal-mensaje-content {
        padding: 24px 20px 16px;
    }

    .modal-mensaje-icon {
        width: 52px;
        height: 52px;
        margin-bottom: 12px;
    }

    .modal-mensaje-icon svg {
        width: 26px;
        height: 26px;
    }

    .modal-mensaje-titulo {
        font-size: 15px;
        margin-bottom: 6px;
    }

    .modal-mensaje-texto {
        font-size: 12px;
    }

    .modal-mensaje-footer {
        padding: 12px 20px 20px;
    }

    .btn-modal {
        padding: 10px 24px;
        font-size: 12px;
    }

    .modal-mensaje-close {
        width: 24px;
        height: 24px;
        top: 10px;
        right: 10px;
    }

    .modal-mensaje-close svg {
        width: 14px;
        height: 14px;
    }

    /* Footer Movil */
    .main-footer {
        font-size: 9px;
        padding: 10px 14px;
    }

    .footer-creditos {
        font-size: 8px;
        margin-top: 5px;
    }

    /* Header movil - tamaños reducidos */
    .brand-mobile .rol-titulo {
        font-size: 12px;
    }

    .brand-mobile .establecimiento-nombre {
        font-size: 8px;
    }

    /* Notas input movil */
    .nota-input {
        width: 40px !important;
        font-size: 11px;
        padding: 5px 2px;
    }

    /* Filtros Notas por Curso - movil: 2 arriba, 1 abajo */
    .filtros-notas-inline,
    .filtros-notas-curso {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        position: relative;
        z-index: 1000;
    }

    .filtros-notas-inline .form-group:nth-child(3),
    .filtros-notas-curso .form-group:nth-child(3) {
        grid-column: 1;
    }

    /* Tabla de notas movil - NO comprimir, scroll para ver todo */
    .tabla-notas-curso-container {
        margin-left: -26px;
        margin-right: -26px;
        width: calc(100% + 52px);
        overflow: visible;
    }

    .tabla-notas-curso-container .table-responsive.table-scroll {
        overflow: auto !important;
        -webkit-overflow-scrolling: touch;
        max-height: 350px;
        margin: 0;
        border-radius: 6px;
        display: block;
    }

    /* Forzar que la tabla NO se comprima - mantener tamaño desktop */
    .tabla-notas-curso-container .tabla-notas-amplia {
        width: max-content !important;
        min-width: max-content !important;
        table-layout: auto !important;
        margin-right: 40px !important;
    }

    .tabla-notas-curso-container .tabla-notas-amplia th,
    .tabla-notas-curso-container .tabla-notas-amplia td {
        white-space: nowrap !important;
    }

    .tabla-notas-curso-container .celda-nombre,
    .tabla-notas-curso-container .th-nombre {
        min-width: 130px !important;
        width: 130px !important;
        padding-left: 8px !important;
        padding-right: 6px !important;
        text-align: left !important;
        overflow: visible !important;
        text-overflow: unset !important;
        position: sticky !important;
        left: 0 !important;
        background: #ffffff !important;
        z-index: 2 !important;
    }

    .tabla-notas-curso-container .th-nombre {
        background: #0d1f33 !important;
        z-index: 3 !important;
    }

    .tabla-notas-curso-container .celda-nota {
        width: 42px !important;
        min-width: 42px !important;
    }

    .tabla-notas-curso-container .nota-input-mini {
        width: 38px !important;
        height: 24px !important;
        overflow: visible !important;
        text-overflow: unset !important;
        font-size: 11px !important;
        padding: 2px 4px !important;
    }
}

/* ==================== TABLA DE NOTAS COMPACTA ==================== */
.tabla-notas-amplia {
    font-size: 11px;
}

.tabla-notas-amplia th,
.tabla-notas-amplia td {
    padding: 4px 3px;
    text-align: center;
}

.tabla-notas-amplia th {
    font-size: 10px;
    font-weight: 600;
}

.celda-nombre {
    text-align: left !important;
    white-space: nowrap;
    min-width: auto;
    width: auto;
    font-size: 11px;
    padding-right: 8px !important;
}

.celda-nota {
    padding: 2px 1px !important;
    width: 32px;
    min-width: 32px;
    max-width: 32px;
}

.nota-input-mini {
    width: 28px;
    height: 22px;
    text-align: center;
    font-size: 10px;
    padding: 2px;
    border: none;
    background: transparent;
    font-weight: 500;
}

.nota-input-mini:focus {
    outline: none;
    background: rgba(255, 255, 255, 0.5);
}

/* Filas alternadas celeste suave */
.tabla-notas-amplia tbody tr:nth-child(even) {
    background-color: #e0f2fe;
}

.tabla-notas-amplia tbody tr:nth-child(odd) {
    background-color: #f0f9ff;
}

/* Estilos de promedios */
.celda-promedio-trim {
    font-weight: bold;
    font-size: 10px;
    width: 36px;
    min-width: 36px;
}

.celda-promedio-final {
    font-weight: bold;
    font-size: 11px;
    width: 45px;
    min-width: 45px;
}

/* Colores de promedios según valor */
.promedio-aprobado {
    background-color: #bfdbfe !important;
    color: #1e3a5f !important;
}

.promedio-reprobado {
    background-color: #fee2e2 !important;
    color: #b91c1c !important;
}

/* Colores de notas individuales */
.nota-aprobada {
    color: #166534;
    font-weight: 500;
}

.nota-reprobada {
    color: #b91c1c;
    font-weight: 500;
}

.nota-vacia {
    color: #9ca3af;
}

.nota-valor {
    display: inline-block;
    min-width: 28px;
    text-align: center;
}

/* Estados de aprobado/reprobado en columna */
.estado-aprobado {
    background-color: #dcfce7 !important;
    color: #166534 !important;
    font-weight: 600;
    text-align: center;
}

.estado-reprobado {
    background-color: #fee2e2 !important;
    color: #b91c1c !important;
    font-weight: 600;
    text-align: center;
}

.th-estado {
    background-color: #0d1f33;
    color: #fff;
    font-size: 10px;
    min-width: 70px;
    text-align: center;
}

.celda-estado {
    text-align: center;
    font-size: 11px;
}

/* Encabezados de tabla de notas */
.th-nombre {
    text-align: left !important;
    vertical-align: middle;
    min-width: auto;
    width: auto;
    font-size: 10px;
    padding-right: 8px !important;
}

.th-trimestre {
    text-align: center;
    background-color: #0d1f33;
    color: #fff;
    font-size: 10px;
    padding: 4px 2px !important;
}

.th-nota {
    font-size: 9px;
    width: 28px;
    padding: 3px 1px !important;
}

.th-prom-trim {
    background-color: #1e3a5f;
    color: #fff;
    font-size: 9px;
    width: 28px;
    padding: 3px 1px !important;
}

.th-promedio-final {
    vertical-align: middle;
    background-color: #166534;
    color: #fff;
    font-size: 9px;
    width: 36px;
    padding: 3px 2px !important;
}

/* ==================== BOTONES DE ICONOS PARA ACCIONES ==================== */
.acciones-btns {
    display: flex;
    flex-direction: row;
    gap: 3px;
    align-items: center;
    justify-content: center;
}

.btn-icon {
    width: 24px;
    height: 24px;
    border: 1px solid var(--border-color);
    border-radius: 2px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
    padding: 0;
}

.btn-icon svg {
    width: 12px;
    height: 12px;
}

.btn-icon-edit {
    background: #f9fafb;
    color: var(--text-secondary);
    border-color: var(--border-color);
}

.btn-icon-edit:hover {
    background: #1e3a5f;
    color: white;
    border-color: #1e3a5f;
}

.btn-icon-delete {
    background: #f9fafb;
    color: #991b1b;
    border-color: #fecaca;
}

.btn-icon-delete:hover {
    background: #991b1b;
    color: white;
    border-color: #991b1b;
}

/* Input de notas */
.nota-input {
    padding: 6px 4px;
    border: 1px solid var(--border-color);
    border-radius: 0;
    font-size: 12px;
    text-align: center;
    font-family: inherit;
}

.nota-input:focus {
    outline: none;
    border-color: #0d1f33;
    background: #f9fafb;
}

/* ==================== DASHBOARD ESTADISTICAS ==================== */
.estadisticas-dashboard {
    display: flex;
    flex-direction: column;
    gap: 20px;
    overflow: visible;
}

/* Vista Titulo */
.stats-vista-titulo {
    padding: 0 4px;
}

.stats-vista-titulo h2 {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 4px 0;
}

.stats-vista-subtitulo {
    font-size: 13px;
    color: var(--text-muted);
}

/* KPIs en fila */
.stats-kpis-row {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 12px;
}

/* Graficos Grid */
.stats-graficos-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.stats-grafico-wide {
    grid-column: 1 / -1;
}

.stats-grafico-body {
    height: 200px;
    padding: 16px;
}

.stats-grafico-body-lg {
    height: 240px;
}

/* Info Adicional */
.stats-info-adicional {
    margin-top: 4px;
}

.stats-info-card {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 16px;
}

.stats-info-card h4 {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0 0 12px 0;
}

.stats-cursos-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.stats-curso-tag {
    display: inline-block;
    padding: 6px 12px;
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    color: #1e40af;
    font-size: 12px;
    font-weight: 500;
    border-radius: 4px;
    border: 1px solid #bfdbfe;
}

/* ==================== ASISTENCIA TAB ==================== */

/* Permitir que dropdowns salgan del contenedor */
.tab-panel:has(.filtros-asistencia) .card,
.tab-panel:has(.filtros-asistencia) .card-body {
    overflow: visible;
}

.filtros-asistencia {
    margin-bottom: 20px;
    position: relative;
    z-index: 100;
}

.filtros-asistencia .form-group {
    position: relative;
}

.filtros-asistencia .custom-select-container {
    position: relative;
    z-index: 100;
}

.filtros-asistencia .custom-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
    max-height: 150px;
    overflow-y: auto;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* ==================== ALUMNOS TAB - FILTROS ==================== */

/* Permitir que dropdowns salgan del contenedor en TODA la pestaña Alumnos */
.tab-panel:has(.form-alumnos) .card,
.tab-panel:has(.form-alumnos) .card-body,
.tab-panel:has(.filtros-alumnos) .card,
.tab-panel:has(.filtros-alumnos) .card-body {
    overflow: visible;
}

/* Sección Gestión de Alumnos */
.form-alumnos {
    position: relative;
    z-index: 100;
}

.form-alumnos .form-group {
    position: relative;
}

.form-alumnos .custom-select-container {
    position: relative;
    z-index: 100;
}

.form-alumnos .custom-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
    max-height: 150px;
    overflow-y: auto;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    background: #fff;
}

/* Sección Listado de Alumnos */
.filtros-alumnos {
    position: relative;
    z-index: 100;
}

.filtros-alumnos .form-group {
    position: relative;
}

.filtros-alumnos .custom-select-container {
    position: relative;
    z-index: 100;
}

.filtros-alumnos .custom-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
    max-height: 150px;
    overflow-y: auto;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    background: #fff;
}

/* ==================== ASIGNACIONES TAB - FILTROS ==================== */

/* Permitir que dropdowns salgan del contenedor */
.tab-panel:has(.filtros-asignaciones) .card,
.tab-panel:has(.filtros-asignaciones) .card-body,
.tab-panel:has(.filtros-asignaciones-form) .card,
.tab-panel:has(.filtros-asignaciones-form) .card-body {
    overflow: visible;
}

.filtros-asignaciones,
.filtros-asignaciones-form {
    position: relative;
    z-index: 100;
}

.filtros-asignaciones .form-group,
.filtros-asignaciones-form .form-group {
    position: relative;
}

.filtros-asignaciones .custom-select-container,
.filtros-asignaciones-form .custom-select-container {
    position: relative;
    z-index: 100;
}

.filtros-asignaciones .custom-select-options,
.filtros-asignaciones-form .custom-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
    max-height: 150px;
    overflow-y: auto;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    background: #fff;
}

/* ==================== DOCENTES TAB - FILTROS ==================== */

/* Permitir que dropdowns salgan del contenedor */
.tab-panel:has(.filtros-docentes) .card,
.tab-panel:has(.filtros-docentes) .card-body {
    overflow: visible;
}

.filtros-docentes {
    position: relative;
    z-index: 100;
}

.filtros-docentes .form-group {
    position: relative;
}

.filtros-docentes .custom-select-container {
    position: relative;
    z-index: 100;
}

.filtros-docentes .custom-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
    max-height: 150px;
    overflow-y: auto;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    background: #fff;
}

/* Filtros Notas por Curso - custom selects */
.tab-panel:has(.filtros-notas-curso) .card,
.tab-panel:has(.filtros-notas-curso) .card-body {
    overflow: visible !important;
}

.filtros-notas-curso {
    position: relative;
    z-index: 1000;
}

.filtros-notas-curso .form-group {
    position: relative;
}

/* Z-index descendente para que el primer filtro quede sobre los demás */
.filtros-notas-curso .form-group:nth-child(1) {
    z-index: 1003;
}

.filtros-notas-curso .form-group:nth-child(2) {
    z-index: 1002;
}

.filtros-notas-curso .form-group:nth-child(3) {
    z-index: 1001;
}

.filtros-notas-curso .custom-select-container {
    position: relative;
}

.filtros-notas-curso .custom-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 9999;
    max-height: 150px;
    overflow-y: auto;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    background: #fff;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
}

/* Asegurar que la tabla quede debajo de los filtros */
.filtros-notas-curso ~ .tabla-notas-curso-container,
.filtros-notas-curso ~ div:has(.tabla-notas-curso-container) {
    position: relative;
    z-index: 1;
}

.acciones-rapidas {
    display: flex;
    gap: 8px;
}

.btn-sm {
    padding: 6px 12px;
    font-size: 12px;
}

.asistencia-stats {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.asistencia-stats .stat-item {
    flex: 1;
    min-width: 100px;
    padding: 12px 16px;
    border-radius: 6px;
    text-align: center;
    border: 1px solid var(--border-color);
}

.asistencia-stats .stat-numero {
    display: block;
    font-size: 24px;
    font-weight: 700;
    line-height: 1.2;
}

.asistencia-stats .stat-label {
    display: block;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: 4px;
    opacity: 0.8;
}

.asistencia-stats .stat-total {
    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
    color: #475569;
}

.asistencia-stats .stat-presentes {
    background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
    color: #166534;
}

.asistencia-stats .stat-ausentes {
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
    color: #991b1b;
}

.asistencia-stats .stat-porcentaje {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    color: #1e40af;
}

.asistencia-stats .stat-justificados {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    color: #1e40af;
}

.asistencia-stats .stat-bajo-umbral {
    background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
    color: #9d174d;
}

.asistencia-stats .stat-bajo-umbral.clickable {
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.asistencia-stats .stat-bajo-umbral.clickable:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(157, 23, 77, 0.3);
}

.th-numero,
.td-numero {
    width: 35px;
    text-align: center;
    padding-right: 4px !important;
}

.th-alumno,
.td-alumno {
    padding-left: 4px !important;
}

.th-asistencia,
.td-asistencia {
    text-align: center;
    width: 80px;
}

.td-asistencia input[type="radio"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--primary-color);
}

.radio-presente:checked {
    accent-color: #16a34a;
}

.radio-ausente:checked {
    accent-color: #dc2626;
}

.radio-tardanza:checked {
    accent-color: #d97706;
}

.radio-justificado:checked {
    accent-color: #2563eb;
}

/* Leyenda de asistencia */
.asistencia-leyenda {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
    padding: 10px 15px;
    background: #f8fafc;
    border-radius: 8px;
    flex-wrap: wrap;
}

.leyenda-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: #475569;
}

/* Tabla de asistencia tipo calendario */
.tabla-asistencia-calendario {
    margin-top: 20px;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    overflow: hidden;
}

.tabla-asistencia-wrapper {
    display: flex;
    max-height: 500px;
    overflow: hidden;
}

.columnas-fijas {
    flex-shrink: 0;
    background: #fff;
    z-index: 10;
    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    overflow-y: auto;
}

.columnas-scroll {
    flex: 1;
    overflow-x: auto;
    overflow-y: auto;
}

/* Sincronizar scroll vertical */
.columnas-fijas::-webkit-scrollbar,
.columnas-scroll::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

.columnas-fijas::-webkit-scrollbar-thumb,
.columnas-scroll::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
}

.columnas-fijas::-webkit-scrollbar-track,
.columnas-scroll::-webkit-scrollbar-track {
    background: #f1f5f9;
}

.tabla-fija,
.tabla-dias {
    border-collapse: collapse;
    width: 100%;
}

.tabla-fija thead,
.tabla-dias thead {
    position: sticky;
    top: 0;
    z-index: 5;
    background: #fff;
}

.tabla-fija th,
.tabla-fija td,
.tabla-dias th,
.tabla-dias td {
    border: 1px solid #e2e8f0;
    padding: 8px;
    text-align: center;
    white-space: nowrap;
}

.tabla-fija .th-espaciador {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    height: 36px;
    padding: 0;
    border: 1px solid #e2e8f0;
    box-sizing: border-box;
}

.tabla-fija .th-numero {
    width: 40px;
    background: #f1f5f9;
    font-weight: 600;
    color: #334155;
    height: 34px;
    padding: 0 4px;
    box-sizing: border-box;
    vertical-align: middle;
    line-height: 34px;
}

.tabla-fija .th-alumno {
    min-width: 180px;
    text-align: left;
    background: #f1f5f9;
    font-weight: 600;
    color: #334155;
    height: 34px;
    padding: 0 8px;
    box-sizing: border-box;
    vertical-align: middle;
    line-height: 34px;
}

.tabla-fija .td-numero {
    background: #f8fafc;
    font-weight: 500;
    color: #64748b;
    height: 34px;
    padding: 0 4px;
    vertical-align: middle;
    line-height: 34px;
}

.tabla-fija .td-alumno {
    text-align: left;
    font-size: 13px;
    color: #334155;
    background: #fff;
    height: 34px;
    padding: 0 8px;
    vertical-align: middle;
    line-height: 34px;
}

.tabla-dias .th-mes {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: #fff;
    font-weight: 600;
    font-size: 14px;
    height: 36px;
    padding: 0 10px;
    box-sizing: border-box;
    vertical-align: middle;
    line-height: 36px;
}

.tabla-dias .th-dia {
    background: #f1f5f9;
    font-weight: 600;
    color: #475569;
    min-width: 36px;
    height: 34px;
    padding: 2px;
    box-sizing: border-box;
    vertical-align: middle;
}

.tabla-dias .th-dia .dia-inicial {
    display: block;
    font-size: 10px;
    color: #64748b;
    line-height: 1;
}

.tabla-dias .th-dia .dia-numero {
    display: block;
    font-size: 11px;
    color: #334155;
    font-weight: 700;
    line-height: 1.2;
}

.tabla-dias .td-dia {
    padding: 0;
    min-width: 36px;
    height: 34px;
    vertical-align: middle;
    box-sizing: border-box;
}

/* Separador de semanas */
.tabla-dias .inicio-semana {
    border-left: 3px solid #94a3b8 !important;
}

/* Días feriados */
.tabla-dias .dia-feriado {
    background: #e2e8f0 !important;
    cursor: default;
}

.tabla-dias th.dia-feriado .dia-inicial,
.tabla-dias th.dia-feriado .dia-numero {
    color: #94a3b8;
}

.asistencia-feriado {
    font-size: 9px;
    font-weight: 600;
    color: #94a3b8;
}

.tabla-fija tbody tr,
.tabla-dias tbody tr {
    height: 34px;
}

.tabla-fija tbody tr:nth-child(even),
.tabla-dias tbody tr:nth-child(even) {
    background: #f8fafc;
}

.tabla-fija tbody tr:hover,
.tabla-dias tbody tr:hover {
    background: #e0f2fe;
}

/* Iconos de asistencia */
.asistencia-icono {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 22px;
    border-radius: 4px;
    font-weight: 700;
    font-size: 12px;
}

.asistencia-presente {
    background: #dcfce7;
    color: #16a34a;
}

.asistencia-ausente {
    background: #fee2e2;
    color: #dc2626;
}

.asistencia-tardanza {
    background: #fef3c7;
    color: #d97706;
}

.asistencia-justificado {
    background: #dbeafe;
    color: #2563eb;
    font-size: 9px;
    font-weight: 600;
}

.asistencia-vacio {
    background: #f1f5f9;
    color: #94a3b8;
}

/* Celda clickeable */
.td-dia-clickable {
    cursor: pointer;
    transition: all 0.15s ease;
}

.td-dia-clickable:hover {
    background: #e0f2fe !important;
    transform: scale(1.05);
}

/* Popup de asistencia */
.popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

.popup-asistencia {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    width: 340px;
    max-width: 90vw;
    animation: slideUp 0.2s ease;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    border-bottom: 1px solid #e2e8f0;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    border-radius: 12px 12px 0 0;
}

.popup-header h4 {
    margin: 0;
    font-size: 15px;
    font-weight: 600;
    color: #fff;
}

.popup-close {
    background: none;
    border: none;
    font-size: 22px;
    color: #fff;
    cursor: pointer;
    padding: 0;
    line-height: 1;
    opacity: 0.8;
    transition: opacity 0.2s;
}

.popup-close:hover {
    opacity: 1;
}

.popup-body {
    padding: 16px 18px;
}

.popup-info {
    margin-bottom: 14px;
    padding-bottom: 14px;
    border-bottom: 1px solid #e2e8f0;
}

.popup-alumno {
    font-weight: 600;
    font-size: 14px;
    color: #1e293b;
    margin-bottom: 6px;
}

.popup-fecha {
    display: flex;
    gap: 8px;
    align-items: center;
}

.popup-dia {
    background: #f1f5f9;
    color: #475569;
    padding: 3px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.popup-fecha-completa {
    color: #64748b;
    font-size: 13px;
}

.popup-estado-actual {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    background: #f8fafc;
    border-radius: 6px;
    margin-bottom: 14px;
    font-size: 13px;
}

.popup-label {
    font-weight: 500;
    color: #475569;
    font-size: 12px;
    display: block;
    margin-bottom: 8px;
}

.popup-opciones {
    margin-top: 12px;
}

.popup-estados {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
}

.btn-estado {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 12px;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    background: #fff;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    color: #475569;
    transition: all 0.15s ease;
}

.btn-estado:hover {
    border-color: #cbd5e1;
    background: #f8fafc;
}

.btn-estado.activo {
    border-color: #3b82f6;
    background: #eff6ff;
    color: #1d4ed8;
}

.btn-presente.activo {
    border-color: #16a34a;
    background: #dcfce7;
    color: #166534;
}

.btn-ausente.activo {
    border-color: #dc2626;
    background: #fee2e2;
    color: #991b1b;
}

.btn-tardanza.activo {
    border-color: #d97706;
    background: #fef3c7;
    color: #92400e;
}

.btn-justificado.activo {
    border-color: #2563eb;
    background: #dbeafe;
    color: #1e40af;
}

.popup-footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    padding: 14px 18px;
    border-top: 1px solid #e2e8f0;
    background: #f8fafc;
    border-radius: 0 0 12px 12px;
}

.popup-footer .btn {
    padding: 8px 16px;
    font-size: 13px;
}

/* Popup de alumnos bajo 85% */
.popup-bajo-umbral {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    width: 380px;
    max-width: 90vw;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    animation: slideUp 0.2s ease;
}

.popup-bajo-umbral .popup-header {
    background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
}

.popup-curso-info {
    font-size: 13px;
    color: #64748b;
    padding: 8px 12px;
    background: #f8fafc;
    border-radius: 6px;
    margin-bottom: 12px;
    text-align: center;
    font-weight: 500;
}

.lista-bajo-umbral {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: 300px;
    overflow-y: auto;
}

.alumno-bajo-umbral {
    display: flex;
    align-items: center;
    padding: 10px 12px;
    border-bottom: 1px solid #f1f5f9;
    gap: 10px;
}

.alumno-bajo-umbral:last-child {
    border-bottom: none;
}

.alumno-bajo-umbral:hover {
    background: #fdf2f8;
}

.alumno-numero {
    font-size: 12px;
    color: #94a3b8;
    min-width: 24px;
}

.alumno-nombre {
    flex: 1;
    font-size: 13px;
    color: #334155;
}

.alumno-porcentaje {
    font-size: 12px;
    font-weight: 600;
    color: #be185d;
    background: #fce7f3;
    padding: 2px 8px;
    border-radius: 10px;
}

/* Responsive Asistencia - Tablet */
@media (max-width: 1100px) {
    .asistencia-stats {
        gap: 8px;
    }

    .asistencia-stats .stat-item {
        min-width: 80px;
        padding: 10px 12px;
    }

    .asistencia-stats .stat-numero {
        font-size: 20px;
    }

    .asistencia-stats .stat-label {
        font-size: 10px;
    }

    .asistencia-leyenda {
        gap: 12px;
        padding: 8px 12px;
    }

    .leyenda-item {
        font-size: 12px;
    }

    .tabla-asistencia-wrapper {
        max-height: 400px;
    }

    .tabla-fija .th-alumno {
        min-width: 140px;
    }

    .tabla-dias .th-dia {
        min-width: 32px;
        height: 32px;
    }

    .tabla-dias .th-dia .dia-inicial {
        font-size: 9px;
    }

    .tabla-dias .th-dia .dia-numero {
        font-size: 10px;
    }

    .tabla-dias .td-dia {
        min-width: 32px;
    }

    .asistencia-icono {
        width: 24px;
        height: 20px;
        font-size: 10px;
    }

    .asistencia-justificado {
        font-size: 8px;
    }
}

/* Responsive Asistencia - Movil */
@media (max-width: 699px) {
    .asistencia-stats .stat-item {
        min-width: 60px;
        padding: 8px;
    }

    .asistencia-stats .stat-numero {
        font-size: 18px;
    }

    .asistencia-stats .stat-label {
        font-size: 9px;
    }

    .asistencia-leyenda {
        display: flex;
        flex-wrap: nowrap;
        justify-content: space-between;
        gap: 4px;
        padding: 6px 8px;
    }

    .leyenda-item {
        font-size: 9px;
        display: flex;
        align-items: center;
        gap: 2px;
        flex: 1;
        justify-content: center;
    }

    .leyenda-item .asistencia-icono {
        width: 16px;
        height: 14px;
        font-size: 8px;
    }

    .tabla-asistencia-wrapper {
        max-height: 350px;
    }

    .tabla-fija .th-alumno {
        min-width: 90px;
        max-width: 90px;
        font-size: 10px;
    }

    .tabla-fija .td-alumno {
        font-size: 10px;
        max-width: 90px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .tabla-dias .th-dia {
        min-width: 28px;
        height: 30px;
        padding: 1px;
    }

    .tabla-dias .th-dia .dia-inicial {
        font-size: 8px;
    }

    .tabla-dias .th-dia .dia-numero {
        font-size: 9px;
    }

    .tabla-dias .td-dia {
        padding: 2px;
        min-width: 28px;
    }

    .asistencia-icono {
        width: 22px;
        height: 18px;
        font-size: 9px;
    }

    .asistencia-justificado {
        font-size: 7px;
    }
}

/* Box de Estadísticas */
.stats-estadisticas-box {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: 0;
    overflow: hidden;
}

.stats-estadisticas-body {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.stats-stat-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: 6px;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    transition: all 0.2s ease;
}

.stats-stat-item:hover {
    transform: translateX(4px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.stats-stat-item .stat-icon {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.stats-stat-item .stat-content {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.stats-stat-item .stat-label {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #64748b;
}

.stats-stat-item .stat-value {
    font-size: 20px;
    font-weight: 700;
    line-height: 1.2;
}

.stats-stat-item .stat-sublabel {
    font-size: 11px;
    color: #94a3b8;
    margin-top: 2px;
}

/* Variantes de color para stats */
.stats-stat-success .stat-icon {
    background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
    color: #16a34a;
}

.stats-stat-success .stat-value {
    color: #16a34a;
}

.stats-stat-danger .stat-icon {
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
    color: #dc2626;
}

.stats-stat-danger .stat-value {
    color: #dc2626;
}

.stats-stat-info .stat-icon {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    color: #2563eb;
}

.stats-stat-info .stat-value {
    color: #2563eb;
}

.stats-stat-warning .stat-icon {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #d97706;
}

.stats-stat-warning .stat-value {
    color: #d97706;
}

.stats-seccion {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.stats-seccion-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    background: linear-gradient(135deg, #0d1f33 0%, #1e3a5f 100%);
    color: white;
}

.stats-seccion-header h3 {
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    display: flex;
    align-items: center;
    gap: 10px;
}

.stats-seccion-header h3 svg {
    width: 18px;
    height: 18px;
    opacity: 0.9;
}

.stats-seccion-badge {
    font-size: 9px;
    padding: 4px 12px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    font-weight: 600;
    letter-spacing: 0.05em;
    backdrop-filter: blur(4px);
}

.stats-kpis-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    padding: 16px;
    background: #f8fafc;
}

/* KPI Card Base */
.stats-kpi-card {
    background: var(--surface-color);
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    padding: 12px 12px 12px 16px;
    display: flex;
    gap: 10px;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.stats-kpi-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: #d1d5db;
    transition: all 0.2s ease;
}

.stats-kpi-card:hover {
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
    transform: translateY(-1px);
    border-color: #cbd5e1;
}

/* KPI Icon */
.kpi-icon {
    width: 38px;
    height: 38px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
}

.kpi-icon svg {
    width: 18px;
    height: 18px;
}

/* KPI Content */
.kpi-content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
}

.kpi-badge {
    display: inline-block;
    font-size: 8px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 3px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 4px;
    width: fit-content;
}

.kpi-label {
    font-size: 9px;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 3px;
}

.kpi-value {
    font-size: 16px;
    font-weight: 800;
    color: var(--text-primary);
    line-height: 1.1;
    margin-bottom: 2px;
    letter-spacing: -0.02em;
}

.kpi-sublabel {
    font-size: 10px;
    color: #94a3b8;
    line-height: 1.3;
}

/* KPI Progress Bar */
.kpi-bar {
    height: 4px;
    background: #e2e8f0;
    border-radius: 2px;
    margin-top: 8px;
    overflow: hidden;
}

.kpi-bar-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.4s ease;
    background: linear-gradient(90deg, currentColor 0%, currentColor 100%);
}

/* KPI Variantes de color */

/* Principal - Tarjeta destacada oscura */
.stats-kpi-card.kpi-principal {
    background: linear-gradient(135deg, #0d1f33 0%, #1a3a5c 100%);
    border-color: #2d4a6f;
}

.stats-kpi-card.kpi-principal::before {
    background: linear-gradient(180deg, #10b981 0%, #059669 100%);
    width: 5px;
}

.stats-kpi-card.kpi-principal .kpi-icon {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    backdrop-filter: blur(4px);
}

.stats-kpi-card.kpi-principal .kpi-label {
    color: rgba(255, 255, 255, 0.8);
}

.stats-kpi-card.kpi-principal .kpi-value {
    color: white;
    font-size: 18px;
}

.stats-kpi-card.kpi-principal .kpi-sublabel {
    color: rgba(255, 255, 255, 0.6);
}

.stats-kpi-card.kpi-principal .kpi-badge {
    background: rgba(16, 185, 129, 0.3);
    color: #6ee7b7;
}

.stats-kpi-card.kpi-principal .kpi-bar {
    background: rgba(255, 255, 255, 0.15);
}

.stats-kpi-card.kpi-principal .kpi-bar-fill {
    background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
}

/* Success - Verde */
.stats-kpi-card.kpi-success::before {
    background: linear-gradient(180deg, #10b981 0%, #059669 100%);
}

.stats-kpi-card.kpi-success .kpi-icon {
    background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
    color: #059669;
}

.stats-kpi-card.kpi-success .kpi-badge {
    background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
    color: #047857;
    box-shadow: 0 1px 2px rgba(5, 150, 105, 0.15);
}

.stats-kpi-card.kpi-success .kpi-bar-fill {
    background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
}

/* Success Light */
.stats-kpi-card.kpi-success-light {
    background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
}

.stats-kpi-card.kpi-success-light::before {
    background: linear-gradient(180deg, #22c55e 0%, #16a34a 100%);
}

.stats-kpi-card.kpi-success-light .kpi-icon {
    background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
    color: #16a34a;
}

.stats-kpi-card.kpi-success-light .kpi-badge {
    background: #dcfce7;
    color: #15803d;
}

.stats-kpi-card.kpi-success-light .kpi-bar-fill {
    background: linear-gradient(90deg, #22c55e 0%, #4ade80 100%);
}

/* Asistencia - Cyan/Teal */
.stats-kpi-card.kpi-asistencia {
    background: linear-gradient(135deg, #ffffff 0%, #f0fdfa 100%);
}

.stats-kpi-card.kpi-asistencia::before {
    background: linear-gradient(180deg, #14b8a6 0%, #0d9488 100%);
}

.stats-kpi-card.kpi-asistencia .kpi-icon {
    background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%);
    color: #0d9488;
}

.stats-kpi-card.kpi-asistencia .kpi-badge {
    background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%);
    color: #0f766e;
    box-shadow: 0 1px 2px rgba(13, 148, 136, 0.15);
}

.stats-kpi-card.kpi-asistencia .kpi-bar-fill {
    background: linear-gradient(90deg, #14b8a6 0%, #2dd4bf 100%);
}

/* Danger - Rojo */
.stats-kpi-card.kpi-danger::before {
    background: linear-gradient(180deg, #ef4444 0%, #dc2626 100%);
}

.stats-kpi-card.kpi-danger .kpi-icon {
    background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
    color: #dc2626;
}

.stats-kpi-card.kpi-danger .kpi-badge {
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
    color: #b91c1c;
    box-shadow: 0 1px 2px rgba(220, 38, 38, 0.15);
}

.stats-kpi-card.kpi-danger .kpi-bar-fill {
    background: linear-gradient(90deg, #ef4444 0%, #f87171 100%);
}

/* Danger Light */
.stats-kpi-card.kpi-danger-light {
    background: linear-gradient(135deg, #ffffff 0%, #fef2f2 100%);
}

.stats-kpi-card.kpi-danger-light::before {
    background: linear-gradient(180deg, #f87171 0%, #ef4444 100%);
}

.stats-kpi-card.kpi-danger-light .kpi-icon {
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
    color: #ef4444;
}

.stats-kpi-card.kpi-danger-light .kpi-badge {
    background: #fee2e2;
    color: #dc2626;
}

.stats-kpi-card.kpi-danger-light .kpi-bar-fill {
    background: linear-gradient(90deg, #f87171 0%, #fca5a5 100%);
}

/* Warning - Amarillo/Naranja */
.stats-kpi-card.kpi-warning::before {
    background: linear-gradient(180deg, #f59e0b 0%, #d97706 100%);
}

.stats-kpi-card.kpi-warning .kpi-icon {
    background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
    color: #d97706;
}

.stats-kpi-card.kpi-warning .kpi-badge {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #b45309;
    box-shadow: 0 1px 2px rgba(217, 119, 6, 0.15);
}

.stats-kpi-card.kpi-warning .kpi-bar-fill {
    background: linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%);
}

/* Warning Light */
.stats-kpi-card.kpi-warning-light {
    background: linear-gradient(135deg, #ffffff 0%, #fffbeb 100%);
}

.stats-kpi-card.kpi-warning-light::before {
    background: linear-gradient(180deg, #fbbf24 0%, #f59e0b 100%);
}

.stats-kpi-card.kpi-warning-light .kpi-icon {
    background: linear-gradient(135deg, #fef9c3 0%, #fef08a 100%);
    color: #ca8a04;
}

.stats-kpi-card.kpi-warning-light .kpi-badge {
    background: #fef9c3;
    color: #a16207;
}

.stats-kpi-card.kpi-warning-light .kpi-bar-fill {
    background: linear-gradient(90deg, #fbbf24 0%, #fcd34d 100%);
}

/* Info - Azul */
.stats-kpi-card.kpi-info::before {
    background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
}

.stats-kpi-card.kpi-info .kpi-icon {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    color: #2563eb;
}

.stats-kpi-card.kpi-info .kpi-badge {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    color: #1d4ed8;
    box-shadow: 0 1px 2px rgba(37, 99, 235, 0.15);
}

.stats-kpi-card.kpi-info .kpi-bar-fill {
    background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
}

/* Responsive Dashboard Interactivo */
@media (max-width: 1100px) {
    .stats-filtros-panel {
        flex-direction: column;
        gap: 12px;
    }

    .stats-filtros-panel .form-group {
        width: 100%;
    }

    .stats-kpis-row {
        grid-template-columns: repeat(6, 1fr);
        gap: 8px;
    }

    .stats-kpis-row .stats-kpi-card {
        padding: 8px 6px;
        min-width: 0;
    }

    .stats-kpis-row .kpi-valor {
        font-size: 16px;
    }

    .stats-kpis-row .kpi-label {
        font-size: 8px;
    }

    .stats-graficos-grid {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .stats-grafico-body {
        height: 180px;
        padding: 12px;
    }

    .stats-grafico-body-lg {
        height: 220px;
    }

    .stats-estadisticas-body {
        padding: 12px;
        gap: 10px;
    }

    .stats-stat-item {
        padding: 10px;
        gap: 10px;
    }

    .stats-stat-item .stat-icon {
        width: 32px;
        height: 32px;
    }

    .stats-stat-item .stat-value {
        font-size: 18px;
    }

    .stats-kpis-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        padding: 14px;
    }

    .stats-seccion {
        border-radius: 4px;
    }

    .stats-seccion-header {
        padding: 12px 14px;
    }

    .stats-seccion-header h3 {
        font-size: 11px;
    }

    .stats-kpi-card {
        padding: 10px 10px 10px 14px;
        border-radius: 5px;
    }

    .stats-kpi-card:hover {
        transform: translateY(-1px);
    }

    .kpi-value {
        font-size: 15px;
    }

    .kpi-icon {
        width: 34px;
        height: 34px;
        border-radius: 6px;
    }

    .kpi-icon svg {
        width: 16px;
        height: 16px;
    }

    .stats-kpi-card.kpi-principal .kpi-value {
        font-size: 16px;
    }
}

/* Responsive Dashboard - Movil */
@media (max-width: 699px) {
    .stats-kpis-row {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }

    .stats-kpis-row .stats-kpi-card:nth-child(5),
    .stats-kpis-row .stats-kpi-card:nth-child(6) {
        grid-column: auto;
    }

    .stats-vista-titulo h2 {
        font-size: 16px;
    }

    .stats-vista-subtitulo {
        font-size: 12px;
    }

    .stats-grafico-body {
        height: 160px;
        padding: 10px;
    }

    .stats-info-card {
        padding: 12px;
    }

    .stats-info-card h4 {
        font-size: 11px;
        margin-bottom: 10px;
    }

    .stats-curso-tag {
        padding: 5px 10px;
        font-size: 11px;
    }

    .stats-estadisticas-body {
        padding: 14px;
        gap: 10px;
    }

    .stats-stat-item .stat-value {
        font-size: 18px;
    }

    .stats-kpis-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        padding: 12px;
    }
}

/* Responsive Dashboard - Movil (estilos adicionales) */
@media (max-width: 699px) {
    .estadisticas-dashboard {
        gap: 12px;
    }

    /* Filtros móvil */
    .stats-filtros-panel {
        flex-direction: column;
        gap: 10px;
        padding: 12px;
    }

    .stats-filtros-panel .btn-vista {
        padding: 8px 12px;
        font-size: 11px;
    }

    /* Vista título móvil */
    .stats-vista-titulo {
        padding: 0;
    }

    .stats-vista-titulo h2 {
        font-size: 15px;
    }

    .stats-vista-subtitulo {
        font-size: 11px;
    }

    /* KPIs row móvil - una columna */
    .stats-kpis-row {
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
        min-height: auto;
        overflow: visible;
    }

    .stats-kpis-row .stats-kpi-card:nth-child(5),
    .stats-kpis-row .stats-kpi-card:nth-child(6) {
        grid-column: auto;
    }

    .stats-kpi-card {
        padding: 10px 8px;
        min-height: 70px;
        justify-content: center;
        align-items: center;
    }

    .stats-kpi-card .kpi-icon {
        display: none;
    }

    .stats-kpi-card .kpi-content {
        align-items: center;
        text-align: center;
    }

    .stats-kpi-card .kpi-value {
        font-size: 18px;
    }

    .stats-kpi-card .kpi-label {
        font-size: 9px;
    }

    .stats-kpi-card .kpi-sublabel {
        font-size: 7px;
        margin-top: 2px;
    }

    /* Gráficos móvil */
    .stats-graficos-grid {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .stats-grafico-body {
        height: 150px;
        padding: 8px;
    }

    .stats-grafico-body-lg {
        height: 180px;
    }

    /* Box estadísticas móvil */
    .stats-estadisticas-body {
        padding: 10px;
        gap: 8px;
    }

    .stats-stat-item {
        padding: 8px 10px;
        gap: 8px;
    }

    .stats-stat-item:hover {
        transform: none;
    }

    .stats-stat-item .stat-icon {
        width: 28px;
        height: 28px;
    }

    .stats-stat-item .stat-icon svg {
        width: 14px;
        height: 14px;
    }

    .stats-stat-item .stat-label {
        font-size: 9px;
    }

    .stats-stat-item .stat-value {
        font-size: 16px;
    }

    .stats-stat-item .stat-sublabel {
        font-size: 10px;
    }

    /* Info adicional móvil */
    .stats-info-adicional {
        margin-top: 0;
    }

    .stats-info-card {
        padding: 10px;
        border-radius: 4px;
    }

    .stats-info-card h4 {
        font-size: 10px;
        margin-bottom: 8px;
    }

    .stats-cursos-list {
        gap: 6px;
    }

    .stats-curso-tag {
        padding: 4px 8px;
        font-size: 10px;
        border-radius: 3px;
    }

    .stats-seccion {
        border-radius: 0;
        border-left: none;
        border-right: none;
    }

    .stats-kpis-grid {
        grid-template-columns: 1fr;
        gap: 8px;
        padding: 10px;
    }

    .stats-seccion-header {
        padding: 10px 12px;
    }

    .stats-seccion-header h3 {
        font-size: 10px;
        gap: 6px;
    }

    .stats-seccion-header h3 svg {
        width: 14px;
        height: 14px;
    }

    .stats-seccion-badge {
        font-size: 7px;
        padding: 2px 8px;
    }

    .stats-kpi-card {
        padding: 10px 10px 10px 14px;
        gap: 10px;
        border-radius: 5px;
    }

    .stats-kpi-card::before {
        width: 3px;
    }

    .stats-kpi-card:hover {
        transform: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
    }

    .kpi-icon {
        width: 32px;
        height: 32px;
        border-radius: 6px;
    }

    .kpi-icon svg {
        width: 16px;
        height: 16px;
    }

    .kpi-label {
        font-size: 8px;
        margin-bottom: 2px;
    }

    .kpi-value {
        font-size: 14px;
    }

    .stats-kpi-card.kpi-principal .kpi-value {
        font-size: 15px;
    }

    .kpi-sublabel {
        font-size: 9px;
    }

    .kpi-badge {
        font-size: 7px;
        padding: 2px 5px;
    }

    .kpi-bar {
        height: 3px;
        margin-top: 6px;
    }
}

/* Tablet specific fixes for Notas por Curso */
@media (min-width: 700px) and (max-width: 1100px) {

    /* Fix dropdowns being hidden by card overflow */
    .tab-panel .card {
        overflow: visible;
    }

    /* Fix z-index for dropdowns to be above table headers */
    .custom-select-options {
        z-index: 9999 !important;
    }

    /* Ensure filters container is above table */
    .filtros-notas-inline,
    .filtros-notas-curso {
        position: relative;
        z-index: 1000;
    }

    /* Add margin between filters and table */
    .tabla-notas-curso-container {
        margin-top: 20px;
        position: relative;
        z-index: 1;
    }
}

/* Estilos de Tabs en Chat */
.chat-tabs {
    display: flex;
    background: rgba(255, 255, 255, 0.1);
    padding: 3px;
    border-radius: 6px;
    gap: 3px;
    width: 100%;
}

.chat-tab {
    flex: 1;
    background: transparent;
    border: none;
    font-size: 11px;
    color: rgba(255, 255, 255, 0.7);
    padding: 4px 6px;
    cursor: pointer;
    border-radius: 4px;
    transition: all 0.2s;
}

.chat-tab.active {
    background: white;
    color: var(--primary-color);
    font-weight: 600;
}

/* Estilos de Curso y Mensajes Masivos */
.chat-students-list {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow-y: auto;
}

.chat-back-sub {
    background: transparent;
    border: none;
    color: #64748b;
    font-size: 11px;
    padding: 8px 12px;
    text-align: left;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color);
}

.chat-back-sub:hover {
    background: #f1f5f9;
}

.course-avatar {
    background: var(--secondary-color) !important;
    font-size: 10px !important;
    width: 32px !important;
    height: 32px !important;
    color: white;
}

.all-avatar {
    background: #10b981 !important;
    /* Green for success/all */
    color: white;
}

.special-row {
    background: #f0fdf4 !important;
    /* Light green bg */
    border-bottom: 1px solid #dcfce7 !important;
}

/* Permisos de Chat */
.chat-permissions {
    padding: 8px 12px;
    border-top: 1px solid var(--border-color);
    background: #f8fafc;
}

.perm-btn {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    background: white;
    border: 1px solid #cbd5e1;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 11px;
    color: #64748b;
    cursor: pointer;
    transition: all 0.2s;
}

.perm-btn.active {
    border-color: #10b981;
    color: #059669;
    background: #ecfdf5;
}

.toggle-switch {
    width: 24px;
    height: 14px;
    background: #cbd5e1;
    border-radius: 10px;
    position: relative;
    transition: background 0.2s;
}

.toggle-switch::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 50%;
    transition: transform 0.2s;
}

.toggle-switch.on {
    background: #10b981;
}

.toggle-switch.on::after {
    transform: translateX(10px);
}

.chat-header-info-col {
    display: flex;
    flex-direction: column;
}

/* ============================================== */
/* ========== CHAT DOCENTE V2 STYLES =========== */
/* ============================================== */

/* FAB Button */
.chatv2-fab {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1000;
}

.chatv2-fab:hover {
    transform: scale(1.08);
    box-shadow: 0 6px 28px rgba(99, 102, 241, 0.5);
}

.chatv2-fab svg {
    width: 26px;
    height: 26px;
    color: white;
}

.chatv2-fab-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 22px;
    height: 22px;
    padding: 0 6px;
    background: #ef4444;
    color: white;
    font-size: 11px;
    font-weight: 700;
    border-radius: 11px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);
}

/* Overlay */
.chatv2-overlay {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.6);
    backdrop-filter: blur(4px);
    z-index: 1001;
    animation: chatv2-fadeIn 0.2s ease;
}

@keyframes chatv2-fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Modal Principal */
.chatv2-modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.95);
    width: 95vw;
    max-width: 1100px;
    height: 85vh;
    max-height: 700px;
    background: #ffffff;
    border-radius: 16px;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.25);
    z-index: 1002;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.chatv2-modal.active {
    opacity: 1;
    pointer-events: auto;
    transform: translate(-50%, -50%) scale(1);
}

/* Header del Modal */
.chatv2-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    color: white;
}

.chatv2-header-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.chatv2-header-icon {
    width: 24px;
    height: 24px;
    opacity: 0.9;
}

.chatv2-header-title {
    font-size: 18px;
    font-weight: 600;
    letter-spacing: -0.3px;
}

.chatv2-header-badge {
    background: rgba(255, 255, 255, 0.2);
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
}

.chatv2-close-btn {
    width: 36px;
    height: 36px;
    border: none;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.chatv2-close-btn:hover {
    background: rgba(255, 255, 255, 0.25);
}

.chatv2-close-btn svg {
    width: 20px;
    height: 20px;
    color: white;
}

/* Contenido Principal - Layout 3 columnas */
.chatv2-content {
    flex: 1;
    display: flex;
    overflow: hidden;
    background: #f8fafc;
}

/* Columna 1: Navegación */
.chatv2-nav {
    width: 72px;
    background: #1e293b;
    display: flex;
    flex-direction: column;
    padding: 12px 8px;
    gap: 4px;
}

.chatv2-nav-item {
    width: 100%;
    padding: 12px 8px;
    border: none;
    background: transparent;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    color: #94a3b8;
    transition: all 0.2s;
}

.chatv2-nav-item:hover {
    background: rgba(255, 255, 255, 0.08);
    color: #e2e8f0;
}

.chatv2-nav-item.active {
    background: rgba(99, 102, 241, 0.2);
    color: #818cf8;
}

.chatv2-nav-item svg {
    width: 22px;
    height: 22px;
}

.chatv2-nav-item span {
    font-size: 10px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

/* Columna 2: Lista de Contactos */
.chatv2-list {
    width: 300px;
    background: #ffffff;
    border-right: 1px solid #e2e8f0;
    display: flex;
    flex-direction: column;
}

.chatv2-search {
    padding: 12px;
    border-bottom: 1px solid #e2e8f0;
    display: flex;
    align-items: center;
    gap: 10px;
    background: #f8fafc;
}

.chatv2-search svg {
    width: 18px;
    height: 18px;
    color: #94a3b8;
    flex-shrink: 0;
}

.chatv2-search input {
    flex: 1;
    border: none;
    background: transparent;
    font-size: 14px;
    color: #334155;
    outline: none;
}

.chatv2-search input::placeholder {
    color: #94a3b8;
}

.chatv2-list-items {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.chatv2-list-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.15s;
    margin-bottom: 4px;
}

.chatv2-list-item:hover {
    background: #f1f5f9;
}

.chatv2-list-item.active {
    background: #ede9fe;
}

.chatv2-list-item.masivo {
    background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
    border: 1px solid #a7f3d0;
}

.chatv2-list-item.masivo:hover {
    background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
}

.chatv2-list-item.curso {
    border: 1px solid #e2e8f0;
}

/* Avatar */
.chatv2-avatar {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 600;
    flex-shrink: 0;
    position: relative;
}

.chatv2-avatar.small {
    width: 38px;
    height: 38px;
    font-size: 12px;
}

.chatv2-avatar.admin {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
}

.chatv2-avatar.masivo {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
}

.chatv2-avatar.masivo svg {
    width: 20px;
    height: 20px;
}

.chatv2-avatar.estudiante {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
}

.chatv2-avatar.curso {
    background: linear-gradient(135deg, #f59e0b 0%, #ea580c 100%);
    font-size: 11px;
    font-weight: 700;
}

.chatv2-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.chatv2-avatar-badge {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 10px;
    height: 10px;
    background: #10b981;
    border: 2px solid white;
    border-radius: 50%;
}

/* List Item Info */
.chatv2-list-item-info {
    flex: 1;
    min-width: 0;
}

.chatv2-list-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
}

.chatv2-list-item-name {
    font-size: 14px;
    font-weight: 600;
    color: #1e293b;
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.chatv2-list-item-time {
    font-size: 11px;
    color: #94a3b8;
    flex-shrink: 0;
}

.chatv2-list-item-preview {
    font-size: 13px;
    color: #64748b;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.chatv2-list-item-role {
    font-size: 12px;
    color: #94a3b8;
}

.chatv2-tag {
    font-size: 9px;
    font-weight: 700;
    text-transform: uppercase;
    padding: 2px 6px;
    border-radius: 4px;
    letter-spacing: 0.3px;
}

.chatv2-tag.admin {
    background: #fef3c7;
    color: #b45309;
}

.chatv2-unread-badge {
    min-width: 20px;
    height: 20px;
    padding: 0 6px;
    background: #6366f1;
    color: white;
    font-size: 11px;
    font-weight: 700;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chatv2-chevron {
    width: 18px;
    height: 18px;
    color: #94a3b8;
}

.chatv2-list-back {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px;
    color: #6366f1;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    border-bottom: 1px solid #e2e8f0;
    margin-bottom: 8px;
}

.chatv2-list-back:hover {
    background: #f1f5f9;
}

.chatv2-list-back svg {
    width: 18px;
    height: 18px;
}

/* Columna 3: Área de Chat */
.chatv2-chat {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #f8fafc;
    min-width: 0;
}

.chatv2-chat-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: white;
    border-bottom: 1px solid #e2e8f0;
}

.chatv2-back-btn {
    display: none;
    width: 36px;
    height: 36px;
    border: none;
    background: #f1f5f9;
    border-radius: 10px;
    cursor: pointer;
    align-items: center;
    justify-content: center;
}

.chatv2-back-btn:hover {
    background: #e2e8f0;
}

.chatv2-back-btn svg {
    width: 20px;
    height: 20px;
    color: #64748b;
}

.chatv2-chat-header-info {
    flex: 1;
    min-width: 0;
}

.chatv2-chat-header-name {
    font-size: 15px;
    font-weight: 600;
    color: #1e293b;
    display: block;
}

.chatv2-chat-header-status {
    font-size: 12px;
    color: #64748b;
}

.chatv2-chat-header-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}

/* Toggle */
.chatv2-toggle-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
}

.chatv2-toggle-label {
    font-size: 12px;
    color: #64748b;
    font-weight: 500;
}

.chatv2-toggle {
    width: 40px;
    height: 22px;
    background: #cbd5e1;
    border: none;
    border-radius: 11px;
    cursor: pointer;
    position: relative;
    transition: background 0.2s;
}

.chatv2-toggle.active {
    background: #10b981;
}

.chatv2-toggle-slider {
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    background: white;
    border-radius: 50%;
    transition: transform 0.2s;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.chatv2-toggle.active .chatv2-toggle-slider {
    transform: translateX(18px);
}

/* Área de Mensajes */
.chatv2-messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.chatv2-date-separator {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 16px 0;
}

.chatv2-date-separator span {
    background: #e2e8f0;
    color: #64748b;
    font-size: 11px;
    font-weight: 500;
    padding: 4px 12px;
    border-radius: 12px;
    text-transform: capitalize;
}

/* Mensajes */
.chatv2-message {
    display: flex;
    max-width: 75%;
}

.chatv2-message.enviado {
    align-self: flex-end;
}

.chatv2-message.recibido {
    align-self: flex-start;
}

.chatv2-message-bubble {
    padding: 10px 14px;
    border-radius: 16px;
    position: relative;
}

.chatv2-message.enviado .chatv2-message-bubble {
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    color: white;
    border-bottom-right-radius: 4px;
}

.chatv2-message.recibido .chatv2-message-bubble {
    background: white;
    color: #1e293b;
    border-bottom-left-radius: 4px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.chatv2-message-bubble p {
    margin: 0;
    font-size: 14px;
    line-height: 1.5;
    word-wrap: break-word;
}

.chatv2-message-meta {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 4px;
    margin-top: 4px;
}

.chatv2-message-time {
    font-size: 10px;
    opacity: 0.7;
}

.chatv2-message-status svg {
    width: 14px;
    height: 14px;
    opacity: 0.7;
}

.chatv2-message.enviado .chatv2-message-status svg {
    color: white;
}

.chatv2-message.sending {
    opacity: 0.7;
}

.chatv2-message.error .chatv2-message-bubble {
    background: #fee2e2;
    color: #991b1b;
}

.chatv2-message-error {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    background: #ef4444;
    color: white;
    font-size: 11px;
    font-weight: 700;
    border-radius: 50%;
}

.chatv2-mini-spinner {
    width: 12px;
    height: 12px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: chatv2-spin 0.8s linear infinite;
}

@keyframes chatv2-spin {
    to { transform: rotate(360deg); }
}

/* Input Area */
.chatv2-input-area {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: white;
    border-top: 1px solid #e2e8f0;
}

.chatv2-input-wrapper {
    flex: 1;
    background: #f1f5f9;
    border-radius: 24px;
    padding: 0 16px;
}

.chatv2-input-wrapper input {
    width: 100%;
    height: 44px;
    border: none;
    background: transparent;
    font-size: 14px;
    color: #334155;
    outline: none;
}

.chatv2-input-wrapper input::placeholder {
    color: #94a3b8;
}

.chatv2-send-btn {
    width: 44px;
    height: 44px;
    border: none;
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
}

.chatv2-send-btn:hover:not(:disabled) {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
}

.chatv2-send-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.chatv2-send-btn svg {
    width: 20px;
    height: 20px;
    color: white;
}

/* Placeholder */
.chatv2-placeholder {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    text-align: center;
}

.chatv2-placeholder-icon {
    width: 80px;
    height: 80px;
    background: #e2e8f0;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
}

.chatv2-placeholder-icon svg {
    width: 40px;
    height: 40px;
    color: #94a3b8;
}

.chatv2-placeholder h3 {
    font-size: 18px;
    font-weight: 600;
    color: #334155;
    margin: 0 0 8px 0;
}

.chatv2-placeholder p {
    font-size: 14px;
    color: #64748b;
    margin: 0;
}

/* Empty States */
.chatv2-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    gap: 12px;
    color: #64748b;
    font-size: 13px;
}

.chatv2-spinner {
    width: 32px;
    height: 32px;
    border: 3px solid #e2e8f0;
    border-top-color: #6366f1;
    border-radius: 50%;
    animation: chatv2-spin 0.8s linear infinite;
}

.chatv2-empty-list {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    color: #94a3b8;
    text-align: center;
}

.chatv2-empty-list svg {
    width: 48px;
    height: 48px;
    margin-bottom: 12px;
    opacity: 0.5;
}

.chatv2-empty-chat {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex: 1;
    padding: 40px;
    text-align: center;
}

.chatv2-empty-chat-icon {
    width: 64px;
    height: 64px;
    background: #e2e8f0;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 16px;
}

.chatv2-empty-chat-icon svg {
    width: 32px;
    height: 32px;
    color: #94a3b8;
}

.chatv2-empty-chat p {
    font-size: 16px;
    font-weight: 600;
    color: #334155;
    margin: 0 0 4px 0;
}

.chatv2-empty-chat span {
    font-size: 13px;
    color: #64748b;
}

/* ==================== RESPONSIVE ==================== */

/* Tablet grande (900px - 1100px): Reducir un poco */
@media (max-width: 1100px) {
    .chatv2-modal {
        width: 98vw;
        max-width: 1000px;
    }
}

/* Tablet (768px - 900px): Layout 3 columnas compacto */
@media (max-width: 900px) {
    .chatv2-modal {
        width: 98vw;
        max-width: 850px;
        height: 80vh;
    }

    .chatv2-nav {
        width: 56px;
        padding: 8px 4px;
    }

    .chatv2-nav-item {
        padding: 8px 4px;
    }

    .chatv2-nav-item svg {
        width: 20px;
        height: 20px;
    }

    .chatv2-nav-item span {
        font-size: 8px;
    }

    .chatv2-list {
        width: 220px;
    }

    .chatv2-search {
        padding: 10px;
    }

    .chatv2-search input {
        font-size: 13px;
    }

    .chatv2-list-item {
        padding: 10px;
        gap: 10px;
    }

    .chatv2-avatar {
        width: 38px;
        height: 38px;
        font-size: 12px;
    }

    .chatv2-list-item-name {
        font-size: 13px;
    }

    .chatv2-list-item-preview {
        font-size: 12px;
    }

    .chatv2-chat-header {
        padding: 10px 14px;
    }

    .chatv2-chat-header-name {
        font-size: 14px;
    }

    .chatv2-message-bubble p {
        font-size: 13px;
    }

    .chatv2-input-wrapper input {
        height: 40px;
        font-size: 13px;
    }

    .chatv2-send-btn {
        width: 40px;
        height: 40px;
    }
}

/* Tablet pequeña (600px - 768px): Aún más compacto pero 3 columnas */
@media (max-width: 768px) {
    .chatv2-modal {
        width: 98vw;
        max-width: 720px;
        height: 85vh;
        max-height: 600px;
    }

    .chatv2-header {
        padding: 12px 16px;
    }

    .chatv2-header-title {
        font-size: 16px;
    }

    .chatv2-nav {
        width: 50px;
        padding: 6px 3px;
    }

    .chatv2-nav-item {
        padding: 6px 3px;
        gap: 4px;
    }

    .chatv2-nav-item svg {
        width: 18px;
        height: 18px;
    }

    .chatv2-nav-item span {
        font-size: 7px;
    }

    .chatv2-list {
        width: 200px;
    }

    .chatv2-avatar {
        width: 34px;
        height: 34px;
        font-size: 11px;
    }

    .chatv2-avatar.small {
        width: 32px;
        height: 32px;
    }

    .chatv2-list-item {
        padding: 8px;
        gap: 8px;
    }

    .chatv2-list-item-name {
        font-size: 12px;
    }

    .chatv2-list-item-preview {
        font-size: 11px;
    }

    .chatv2-tag {
        font-size: 8px;
        padding: 1px 4px;
    }

    .chatv2-unread-badge {
        min-width: 18px;
        height: 18px;
        font-size: 10px;
    }

    .chatv2-toggle-label {
        display: none;
    }

    .chatv2-toggle {
        width: 36px;
        height: 20px;
    }

    .chatv2-toggle-slider {
        width: 16px;
        height: 16px;
    }

    .chatv2-toggle.active .chatv2-toggle-slider {
        transform: translateX(16px);
    }

    .chatv2-message {
        max-width: 80%;
    }

    .chatv2-message-bubble {
        padding: 8px 12px;
    }

    .chatv2-message-bubble p {
        font-size: 13px;
    }

    .chatv2-fab {
        width: 52px;
        height: 52px;
    }
}

/* Móvil (< 600px): Layout de una columna */
@media (max-width: 600px) {
    .chatv2-modal {
        width: 100%;
        height: 100%;
        max-width: none;
        max-height: none;
        border-radius: 0;
        top: 0;
        left: 0;
        transform: translateY(100%);
    }

    .chatv2-modal.active {
        transform: translateY(0);
    }

    .chatv2-nav {
        display: none;
    }

    .chatv2-list {
        width: 100%;
        border-right: none;
    }

    .chatv2-list.hidden-mobile {
        display: none;
    }

    .chatv2-chat {
        width: 100%;
    }

    .chatv2-chat.hidden-mobile {
        display: none;
    }

    .chatv2-back-btn {
        display: flex;
    }

    .chatv2-avatar {
        width: 42px;
        height: 42px;
        font-size: 13px;
    }

    .chatv2-list-item {
        padding: 12px;
        gap: 12px;
    }

    .chatv2-list-item-name {
        font-size: 14px;
    }

    .chatv2-list-item-preview {
        font-size: 13px;
    }

    .chatv2-fab {
        bottom: 16px;
        right: 16px;
        width: 52px;
        height: 52px;
    }

    .chatv2-message {
        max-width: 85%;
    }

    .chatv2-message-bubble p {
        font-size: 14px;
    }

    .chatv2-input-wrapper input {
        height: 44px;
        font-size: 14px;
    }
}

/* Móvil pequeño (< 400px) */
@media (max-width: 400px) {
    .chatv2-header {
        padding: 10px 12px;
    }

    .chatv2-header-title {
        font-size: 15px;
    }

    .chatv2-chat-header-actions {
        gap: 6px;
    }

    .chatv2-message {
        max-width: 90%;
    }

    .chatv2-input-area {
        padding: 10px 12px;
    }
}

/* ==================== SELECCIÓN MÚLTIPLE DE APODERADOS ==================== */

/* Header del curso con volver */
.chatv2-curso-header {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    background: #f8fafc;
    border-bottom: 1px solid #e2e8f0;
    gap: 12px;
}

.chatv2-curso-header .chatv2-list-back {
    padding: 8px;
    margin: 0;
    border: none;
    flex-shrink: 0;
}

.chatv2-curso-titulo {
    font-size: 15px;
    font-weight: 600;
    color: #1e293b;
}

/* Barra de selección */
.chatv2-seleccion-bar {
    padding: 10px 12px;
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border-bottom: 1px solid #bae6fd;
}

.chatv2-btn-seleccionar {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 10px 14px;
    background: white;
    border: 1px dashed #6366f1;
    border-radius: 10px;
    color: #6366f1;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.chatv2-btn-seleccionar:hover {
    background: #eef2ff;
    border-style: solid;
}

.chatv2-btn-seleccionar svg {
    width: 18px;
    height: 18px;
}

/* Acciones de selección múltiple */
.chatv2-seleccion-acciones {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.chatv2-btn-todos {
    padding: 6px 12px;
    background: #6366f1;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.chatv2-btn-todos:hover {
    background: #4f46e5;
}

.chatv2-btn-todos.active {
    background: #10b981;
}

.chatv2-seleccion-count {
    font-size: 12px;
    color: #64748b;
    padding: 4px 10px;
    background: white;
    border-radius: 12px;
}

.chatv2-btn-cancelar {
    padding: 6px 12px;
    background: transparent;
    color: #64748b;
    border: 1px solid #cbd5e1;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    margin-left: auto;
}

.chatv2-btn-cancelar:hover {
    background: #f1f5f9;
    color: #ef4444;
    border-color: #fca5a5;
}

/* Botón enviar a seleccionados */
.chatv2-enviar-seleccionados {
    padding: 8px 12px;
    background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
    border-bottom: 1px solid #a7f3d0;
}

.chatv2-btn-enviar-grupo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: 100%;
    padding: 12px 16px;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
}

.chatv2-btn-enviar-grupo:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}

.chatv2-btn-enviar-grupo svg {
    width: 18px;
    height: 18px;
}

/* Lista de alumnos en modo selección */
.chatv2-list-item.alumno.selectable {
    cursor: pointer;
    padding-left: 8px;
}

.chatv2-list-item.alumno.selectable:hover {
    background: #f0f9ff;
}

.chatv2-list-item.alumno.selected {
    background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);
    border-left: 3px solid #6366f1;
}

.chatv2-list-item.alumno.selected:hover {
    background: linear-gradient(135deg, #ddd6fe 0%, #c4b5fd 100%);
}

/* Checkbox */
.chatv2-checkbox {
    width: 22px;
    height: 22px;
    border: 2px solid #cbd5e1;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.2s;
    background: white;
}

.chatv2-checkbox.checked {
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    border-color: #6366f1;
}

.chatv2-checkbox svg {
    width: 14px;
    height: 14px;
    color: white;
}

/* Animación de entrada para checkbox */
.chatv2-list-item.alumno.selectable .chatv2-checkbox {
    animation: chatv2-checkboxIn 0.2s ease;
}

@keyframes chatv2-checkboxIn {
    from {
        opacity: 0;
        transform: scale(0.5);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Responsive para selección */
@media (max-width: 480px) {
    .chatv2-seleccion-acciones {
        flex-direction: column;
        align-items: stretch;
        gap: 6px;
    }

    .chatv2-btn-cancelar {
        margin-left: 0;
        text-align: center;
    }

    .chatv2-seleccion-count {
        text-align: center;
    }
}