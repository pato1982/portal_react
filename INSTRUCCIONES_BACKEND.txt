
# =========================================================
# CONFIGURACIÓN PARA EL SERVIDOR REMOTO (BACKEND)
# Copiar este archivo en el servidor para configurar los emails
# =========================================================

# 1. Credenciales de Correo (Gmail)
# Usuario: contacto.portalestudiantil@gmail.com
# Clave: oftv xsad onux jcsu

# 2. Configurar el archivo .env del backend:
# Añadir o modificar las siguientes líneas:

SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_USER=contacto.portalestudiantil@gmail.com
SMTP_PASS=oftv xsad onux jcsu

# 3. Código Nodemailer (Ejemplo para index.js / auth.controller.js)

const nodemailer = require('nodemailer');

const transporter = nodemailer.createTransport({
  host: process.env.SMTP_HOST,
  port: process.env.SMTP_PORT, // 465 para secure true
  secure: true,
  auth: {
    user: process.env.SMTP_USER,
    pass: process.env.SMTP_PASS,
  },
});

// Función para enviar correo de recuperación
async function enviarCorreoRecuperacion(email, token) {
  const url = `https://portalestudiantil.cl/reset-password?token=${token}`;
  
  await transporter.sendMail({
    from: '"Portal Estudiantil" <contacto.portalestudiantil@gmail.com>',
    to: email,
    subject: "Recuperar Contraseña - Portal Estudiantil",
    html: `
      <h2>Recuperación de Contraseña</h2>
      <p>Has solicitado restablecer tu contraseña. Haz clic en el siguiente enlace:</p>
      <a href="${url}">${url}</a>
      <p>Si no solicitaste esto, ignora este correo.</p>
    `,
  });
}
